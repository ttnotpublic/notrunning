function RandomSeed(t,e){var n=Math.random();return n>.667?1:n>.333?-1:0}function RandomArr(t,e){void 0===e&&(e=.92);for(var n=[],i=0;i<t.length;i++)Math.random()<e&&n.push(t[i]);return n}function DEBUG1(t){return debug1&t}function DEBUG2(t){return debug2&t}function DEBUG3(t){return debug3&t}function DEBUG4(t){return debug4&t}function DLOG(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];DEBUG1(DM1.log)&&console.log.apply(null,t),DEBUG1(DM1.egretLog)&&egret.log.call(null,t)}function DWARN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];DEBUG1(DM1.warning)&&console.warn.apply(null,t),DEBUG1(DM1.egretLog)&&egret.warn.call(null,t)}function DERR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];DEBUG1(DM1.error)&&console.error.apply(null,t),DEBUG1(DM1.egretLog)&&egret.error.call(null,t)}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function s(t){try{h(i.next(t))}catch(e){o(e)}}function r(t){try{h(i["throw"](t))}catch(e){o(e)}}function h(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(s,r)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,r,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},BoardCore=function(t){function e(e){void 0===e&&(e=!0);var n=t.call(this)||this;return n.isNeedAddEvent=!0,n.bgContainer=new SpriteWithAlphaPlus,n.isNeedAddEvent=e,n.isNeedAddEvent?(n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onShow,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onHide,n),n):n}return __extends(e,t),e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.onDestroy()},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.onShow=function(){},e.prototype.onHide=function(){Notify.One().removeTarget(this)},e.prototype.onDestroy=function(){},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addChildAt(this.bgContainer,0)},e.prototype.fadeIn=function(){this.bgContainer.alphaPlus=0,egret.Tween.get(this.bgContainer).to({alphaPlus:1},300)},e.prototype.fadeOut=function(){egret.Tween.get(this.bgContainer).to({alphaPlus:0},300)},e.prototype.createBg=function(t){this.bgShape=new egret.Shape,this.bgShape.graphics.beginFill(0,.4),this.bgShape.graphics.drawRect(-300,-100,Cf.One().stage.stageWidth+600,Cf.One().stage.stageHeight+200),this.bgContainer.addChild(this.bgShape)},e.prototype.createBlurBg=function(t){var e=this.visible;this.visible=!1;var n=.1;this.mcBgBlurTexture||(this.mcBgBlurTexture=new egret.RenderTexture),this.mcBgBlurTexture.drawToTexture(Cf.One().stage,new egret.Rectangle(0,0,Cf.One().stage.stageWidth,Cf.One().stage.stageHeight),n),this.bgBmp||(this.bgBmp=new egret.Bitmap(this.mcBgBlurTexture),this.bgBmp.filters=[new egret.BlurFilter(2,2,1)],this.bgContainer.addChildAt(this.bgBmp,0),this.bgBmp.scaleX=this.bgBmp.scaleY=1/n,this.bgContainer.x=-Cf.One().config.offsetStageContent.x,this.bgContainer.y=-Cf.One().config.offsetStageContent.y),this.visible=e,this.visible&&(egret.Tween.removeTweens(this.bgContainer),1==this.bgContainer.alphaPlus&&(this.bgContainer.alphaPlus=0),egret.Tween.get(this.bgContainer).to({alphaPlus:1},400))},e}(eui.Component);__reflect(BoardCore.prototype,"BoardCore",["eui.UIComponent","egret.DisplayObject"]);var SceneCore=function(t){function e(){var e=t.call(this)||this;return e.layerMajor=new egret.DisplayObjectContainer,e.addChild(e.layerMajor),e.layerBoard=new egret.DisplayObjectContainer,e.addChild(e.layerBoard),e.layerTip=new egret.DisplayObjectContainer,e.addChild(e.layerTip),e}return __extends(e,t),e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.onDestroy()},e.prototype.onShow=function(){Notify.One().add(NotifyName.board_gameFinal,this.onNotify,this)},e.prototype.onHide=function(){Notify.One().removeTarget(this),egret.Tween.removeTweens(this)},e.prototype.onDestroy=function(){},e.prototype.onNotify=function(t){t.name==NotifyName.board_gameFinal?(this.board_gameFinal?this.board_gameFinal.reset():(this.board_gameFinal=new BoardFinal,this.layerBoard.addChild(this.board_gameFinal)),this.board_gameFinal.fadeIn()):t.name==NotifyName.system_gotoBackground&&egret.Tween.removeTweens(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.GotoScene=function(t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),AnalyticsSystem.One().scene(t),DEBUG1(DM1.enableBgm)&&(SoundManager.One().pause(SoundName.tag_bgm_game),SoundManager.One().pause(SoundName.tag_bgm_bets)),(null==this.__stage&&null!=n||i)&&(this.__stage=n),!this.__dicScenes[t]){var a=void 0;switch(t){case SceneType.Game_Bet:a=new Scene_Bets;break;case SceneType.Game_Running:a=new Scene_RunningGame;break;case SceneType.Debug:a=new Scene_Debug}a&&(this.__dicScenes[t]=a)}if(this.__stage.numChildren>0){var o=this.__stage.removeChildAt(LayerOrder.Major);o instanceof e&&o.onHide()}if(this.__dicScenes[t]){if(this.__currentScene=this.__dicScenes[t],"fixedNarrow"===Window.scaleMode){Cf.One().stageSize.width-640>0&&(this.__dicScenes[t].x=(Cf.One().stageSize.width-640)/2,Cf.One().config.offsetStageContent.x=this.__dicScenes[t].x),Cf.One().stageSize.height-1136>0}if(this.__stage.addChildAt(this.__dicScenes[t],LayerOrder.Major),null==this.__globalBoardContainer&&(this.__globalBoardContainer=new egret.DisplayObjectContainer,this.__globalBoardContainer.x=Cf.One().config.offsetStageContent.x,this.__stage.addChildAt(this.__globalBoardContainer,LayerOrder.Board),Notify.One().add(NotifyName.board_adsBidding,this.__onNotify,this),Notify.One().add(NotifyName.board_dividendsInfo,this.__onNotify,this),Notify.One().add(NotifyName.board_help,this.__onNotify,this),Notify.One().add(NotifyName.board_contact,this.__onNotify,this)),null==this.__globalTipContainer){this.__globalTipContainer=new egret.DisplayObjectContainer,this.__globalTipContainer.x=Cf.One().config.offsetStageContent.x,this.__stage.addChildAt(this.__globalTipContainer,LayerOrder.Tip);var s=BoardTip.One();this.__globalTipContainer.addChild(s)}this.__dicScenes[t].onShow()}return this.__dicScenes[t]},e.GetCurrentScene=function(){return this.__currentScene},e.__onNotify=function(t){t.name==NotifyName.board_adsBidding?(this.board_AdsBidding||(this.board_AdsBidding=new BoardAdsBidding,this.__globalBoardContainer.addChild(this.board_AdsBidding)),this.board_AdsBidding.fadeIn()):t.name==NotifyName.board_dividendsInfo?(this.board_DividendsInfo||(this.board_DividendsInfo=new BoardDividendsInfo,this.__globalBoardContainer.addChild(this.board_DividendsInfo)),this.board_DividendsInfo.fadeIn()):t.name==NotifyName.board_help?(this.board_Faq||(this.board_Faq=new BoardFAQ,this.__globalBoardContainer.addChild(this.board_Faq)),this.board_Faq.fadeIn()):t.name==NotifyName.board_contact&&(this.board_Contact||(this.board_Contact=new BoardContact,this.__globalBoardContainer.addChild(this.board_Contact)),this.board_Contact.fadeIn())},e.__dicScenes={},e.__currentScene=null,e}(eui.Component);__reflect(SceneCore.prototype,"SceneCore",["eui.UIComponent","egret.DisplayObject"]);var LangType;!function(t){t[t.NONE=0]="NONE",t[t.English=1]="English",t[t.Chinese=2]="Chinese",t[t.Korean=3]="Korean",t[t.TOTAL=4]="TOTAL"}(LangType||(LangType={}));var PlatfomType;!function(t){t[t.mobile=0]="mobile",t[t.pc=1]="pc"}(PlatfomType||(PlatfomType={}));var ButtonType;!function(t){t[t.reset=0]="reset",t[t.go=1]="go",t[t.bet1Selected=2]="bet1Selected",t[t.bet5Selected=3]="bet5Selected",t[t.bet20Selected=4]="bet20Selected",t[t.betSel1st=5]="betSel1st",t[t.betSel1st2nd=6]="betSel1st2nd"}(ButtonType||(ButtonType={}));var TalkRightViewType;!function(t){t[t.Seq=0]="Seq",t[t.History=1]="History"}(TalkRightViewType||(TalkRightViewType={}));var AnimalStatus;!function(t){t[t.NONE=0]="NONE",t[t.ready=1]="ready",t[t.run1=2]="run1",t[t.run2=3]="run2",t[t.run3=4]="run3",t[t.runRandom=5]="runRandom",t[t.idle1=6]="idle1",t[t.idle2=7]="idle2",t[t.idle3=8]="idle3",t[t.hey1=9]="hey1",t[t.hey2=10]="hey2",t[t.hey3=11]="hey3",t[t.hey4=12]="hey4",t[t.hey5=13]="hey5",t[t.idleRandom=14]="idleRandom",t[t.game_win=15]="game_win"}(AnimalStatus||(AnimalStatus={}));var SceneType;!function(t){t[t.Debug=0]="Debug",t[t.Game_Bet=1]="Game_Bet",t[t.Game_Running=2]="Game_Running"}(SceneType||(SceneType={}));var Direction;!function(t){t[t.NONE=0]="NONE",t[t.left=1]="left",t[t.right=2]="right"}(Direction||(Direction={}));var RunnerDebugType;!function(t){t[t.NONE=0]="NONE",t[t.slow=1]="slow",t[t.fast=2]="fast"}(RunnerDebugType||(RunnerDebugType={}));var LayerOrder;!function(t){t[t.Major=0]="Major",t[t.Sub=1]="Sub",t[t.Board=2]="Board",t[t.Tip=3]="Tip",t[t.Particles=4]="Particles"}(LayerOrder||(LayerOrder={}));var BetStatus;!function(t){t[t.NONE=0]="NONE",t[t.timeUp=1]="timeUp",t[t.hasBeted=2]="hasBeted",t[t.refreshHistoryData=4]="refreshHistoryData",t[t.forceGetRaceData=8]="forceGetRaceData",t[t.goingToRaceScene=16]="goingToRaceScene"}(BetStatus||(BetStatus={}));var PlayerIdleId;!function(t){t[t.player0=0]="player0",t[t.player1=2]="player1",t[t.player2=1]="player2",t[t.player3=3]="player3",t[t.player4=4]="player4",t[t.player5=5]="player5",t[t.player6=6]="player6",t[t.player7=7]="player7"}(PlayerIdleId||(PlayerIdleId={}));var PlayerRuningId;!function(t){t[t.player0=0]="player0",t[t.player1=1]="player1",t[t.player2=2]="player2",t[t.player3=3]="player3",t[t.player4=4]="player4",t[t.player5=5]="player5",t[t.player6=6]="player6",t[t.player7=7]="player7"}(PlayerRuningId||(PlayerRuningId={}));var GameRunnerStepBit=50,GameRunnerStep;!function(t){t[t.step0=0]="step0",t[t.step1=1*GameRunnerStepBit]="step1",t[t.step2=2*GameRunnerStepBit]="step2",t[t.step3=3*GameRunnerStepBit]="step3",t[t.step4=4*GameRunnerStepBit]="step4",t[t.step5=5*GameRunnerStepBit]="step5",t[t.stepLoop=6*GameRunnerStepBit]="stepLoop"}(GameRunnerStep||(GameRunnerStep={}));var PoolSpeedsNormal=[3.5,3.5,3.5],PoolSpeedsRandom1_1=[3,4,5],PoolSpeedsRandom1_2=[3,3.5,4,4.5,5],PoolSpeedsRandom1_3=[2.5,3.5,4.5,5.5],PoolSpeedsRandom2_1=[3,4,5,6],PoolSpeedsRandom2_2=[3,3.5,4,4.5,5,5.5,6],PoolSpeedsRandom2_3=[2.5,3.5,4.5,5.5,6.5],PoolSpeedsRandom3_1=[4,5,6,7],PoolSpeedsRandom3_2=[3.5,4.5,5.5,6.5,7.5],PoolSpeedsRandom3_3=[4.5,5.5,6.5,7.5],PoolSpeeds1=[PoolSpeedsRandom1_1,PoolSpeedsRandom1_2,PoolSpeedsRandom1_3],PoolSpeeds2=[PoolSpeedsRandom2_1,PoolSpeedsRandom2_2,PoolSpeedsRandom2_3],PoolSpeeds3=[PoolSpeedsRandom3_1,PoolSpeedsRandom3_2,PoolSpeedsRandom3_3],SpriteWithAlphaPlus=function(t){function e(){var e=t.call(this)||this;return e.__alphaPlus=1,e.__rgb={r:1,g:1,b:1},e}return __extends(e,t),Object.defineProperty(e.prototype,"alphaPlus",{get:function(){return this.__alphaPlus},set:function(t){var e=Math.max(Math.min(t,1),0);if(this.__alphaPlus!=e)return this.__alphaPlus=e,1==this.__alphaPlus?void(this.filters=null):void this.updateRenderFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return this.__rgb},set:function(t){this.__rgb.r=t.r,this.__rgb.g=t.g,this.__rgb.b=t.b,this.updateRenderFilter()},enumerable:!0,configurable:!0}),e.prototype.updateRenderFilter=function(){var t=[this.__rgb.r,0,0,0,0,0,this.__rgb.g,0,0,0,0,0,this.__rgb.b,0,0,0,0,0,this.__alphaPlus,0];this.__colorFilter?this.__colorFilter.matrix=t:this.__colorFilter=new egret.ColorMatrixFilter(t),this.filters=[this.__colorFilter]},e}(egret.Sprite);__reflect(SpriteWithAlphaPlus.prototype,"SpriteWithAlphaPlus");var Board_Running_Core=function(t){function e(){var e=t.call(this)||this;return e.poolPot=[],e.poolAnimate=[],e}return __extends(e,t),e.prototype.reset=function(){this.x=0,this.countDown=1,this.hideAllFlag(),this.resetAllPlayerPosition()},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.grpCountDown.x+=this.grpCountDown.width/2,this.grpCountDown.y+=this.grpCountDown.height/2,this.grpCountDown.anchorOffsetX=this.grpCountDown.width/2,this.grpCountDown.anchorOffsetY=this.grpCountDown.height/2,this.imgAd.source="ad190218_1_jpg",this.hideAllFlag();for(var e=1;8>=e;e++)if(this["grpWay"+e]){this.poolPot.push(this["grpWay"+e]);var n=this["grpWay"+e],i=RunnerDebugType.NONE;1==e&&DEBUG1(DM1.debugRuning)?i=RunnerDebugType.fast:5==e&&DEBUG1(DM1.debugRuning)&&(i=RunnerDebugType.slow);var a=this.poolAnimate[e-1];a.orginalPot={x:n.width/2,y:n.height/2},a.x=a.orginalPot.x,a.y=a.orginalPot.y,n.addChild(a)}else DERR("grpWay"+e+" not set")},e.prototype.onUpdate=function(){},e.prototype.resetAllPlayerPosition=function(){for(var t=0;t<this.poolAnimate.length;t++){var e=this.poolAnimate[t];this.poolPot[t];e.reset(),e.numFinish=Cf.One().gameData.idGetSeq[e.id],e.setStatus(AnimalStatus.ready),e.x=e.orginalPot.x,e.y=e.orginalPot.y}},e.prototype.showFlag=function(t,e){if(!(0>t)){var n=this["grpF"+(t+1)],i=this["mcF"+(t+1)];if(n&&i){switch(n.visible=!0,e){case 1:i.texture=RES.getRes("game_res_json.simbol_way_2nd");break;case 0:default:i.texture=RES.getRes("game_res_json.simbol_way_1st")}n.anchorOffsetX=0,egret.Tween.get(n).to({anchorOffsetX:20},8e3)}}},e.prototype.hideAllFlag=function(){for(var t=0;t<this.poolAnimate.length;t++){var e=this["grpF"+(t+1)];e&&(e.visible=!1)}},e.prototype.startMove=function(){},e.prototype.loopCountdown=function(){egret.Tween.removeTweens(this),this.showCountdown(this.countDown),this.countDown>=0?egret.Tween.get(this).wait(1e3).call(this.loopCountdown,this):this.startMove(),this.countDown--},e.prototype.showCountdown=function(t){egret.Tween.removeTweens(this.grpCountDown),this.grpCountDown.scaleX=this.grpCountDown.scaleY=2,this.grpCountDown.alpha=0,egret.Tween.get(this.grpCountDown).to({alpha:1},300),egret.Tween.get(this.grpCountDown).wait(200).to({scaleX:1,scaleY:1},500,egret.Ease.cubicOut);for(var e=[this.mcCd0,this.mcCd1,this.mcCd2,this.mcCd3],n=0;n<e.length;n++){var i=e[n];i.visible=!1}for(var a=[this.mcCdGo,this.mcCdReady],n=0;n<a.length;n++){var i=a[n];n==t?i.visible=!0:i.visible=!1}},e}(BoardCore);__reflect(Board_Running_Core.prototype,"Board_Running_Core");var Scene_Bets_UI=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.txtAdsBidding.text=Lang.Val(LangKey.str_adsBidding),this.txtDividends.text=Lang.Val(LangKey.str_dividends),this.txtFAQ.text=Lang.Val(LangKey.str_faq),this.txtContact.text=Lang.Val(LangKey.str_contact);for(var e=[this.bt_adword,this.bt_getBonus,this.bt_help,this.bt_contact],n=0;n<e.length;n++){var i=e[n];i&&(i.alpha=0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this))}this.grpTopMenu_SubMenu.visible=!1,this.bt_tm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.betTargets={1:this.grpWin1,2:this.grpWin2,3:this.grpWin3,4:this.grpWin4,5:this.grpWin5,6:this.grpWin6,7:this.grpWin7,8:this.grpWin8,12:this.grpFront1_2,13:this.grpFront1_3,14:this.grpFront1_4,15:this.grpFront1_5,16:this.grpFront1_6,17:this.grpFront1_7,18:this.grpFront1_8,23:this.grpFront2_3,24:this.grpFront2_4,25:this.grpFront2_5,26:this.grpFront2_6,27:this.grpFront2_7,28:this.grpFront2_8,34:this.grpFront3_4,35:this.grpFront3_5,36:this.grpFront3_6,37:this.grpFront3_7,38:this.grpFront3_8,45:this.grpFront4_5,46:this.grpFront4_6,47:this.grpFront4_7,48:this.grpFront4_8,56:this.grpFront5_6,57:this.grpFront5_7,58:this.grpFront5_8,67:this.grpFront6_7,68:this.grpFront6_8,78:this.grpFront7_8}},e.prototype.fadeInSubMenu=function(){this.grpTopMenu_SubMenu.visible=!0,egret.Tween.removeTweens(this.grpTopMenu_SubMenu),this.grpTopMenu_SubMenu.anchorOffsetY=-10,this.grpTopMenu_SubMenu.alpha=0,egret.Tween.get(this.grpTopMenu_SubMenu).to({anchorOffsetY:0,alpha:1},300,egret.Ease.sineOut)},e.prototype.fadeOutSubMenu=function(){this.bt_tm.enabled=!0,egret.Tween.removeTweens(this.grpTopMenu_SubMenu),this.grpTopMenu_SubMenu.visible=!1},e.prototype.onClick=function(t){if(t.currentTarget==this.bt_tm)this.bt_tm.enabled=!this.bt_tm.enabled,this.fadeInSubMenu(),t.stopImmediatePropagation();else if(t.currentTarget==this.bt_adword)this.fadeOutSubMenu(),t.stopImmediatePropagation(),Notify.One().post(NotifyName.board_adsBidding);else if(t.currentTarget==this.bt_getBonus)this.fadeOutSubMenu(),t.stopImmediatePropagation(),Notify.One().post(NotifyName.board_dividendsInfo);else if(t.currentTarget==this.bt_help)this.fadeOutSubMenu(),t.stopImmediatePropagation(),Notify.One().post(NotifyName.board_help);else if(t.currentTarget==this.bt_contact){if(this.fadeOutSubMenu(),t.stopImmediatePropagation(),DEBUG2(DM2.debugBtContact))return TalkingSystem.One().sendBet("game|12|1:1,2:1,3:1|"),TalkingSystem.One().sendBet("game|12||12:1,13:10"),void TalkingSystem.One().sendBet("game|12|1:1,2:1,3:1|12:1,13:10");Notify.One().post(NotifyName.board_contact)}else this.fadeOutSubMenu()},e}(SceneCore);__reflect(Scene_Bets_UI.prototype,"Scene_Bets_UI");var BoardRunnerInfo=function(t){function e(){var e=t.call(this)||this;return DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e}return __extends(e,t),e.prototype.onShow=function(){this.player||(this.player=new AnimalIdel,this.player.isAnimatePlayOnce=!0,this.player.scaleX=this.player.scaleY=2.3,this.potRunner.addChild(this.player))},e.prototype.fadeIn=function(){this.createBlurBg(),t.prototype.fadeIn.call(this)},e.prototype.updateId=function(t){this.visible=!0;var e=Cf.One().dicPlayerInfoById[t];this.player.id=PlayerIdleId["player"+t],this.player.updateId(),this.player.setStatus(AnimalStatus.idleRandom,!1),this.txtRunnerName.text=e.name,this.txtTalkInfo.text=e.intro},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.onTap=function(){this.visible=!1},e}(BoardCore);__reflect(BoardRunnerInfo.prototype,"BoardRunnerInfo");var BmpFontName=function(){function t(){}return t}();__reflect(BmpFontName.prototype,"BmpFontName");var DM1;!function(t){t[t.NONE=0]="NONE",t[t.log=1]="log",t[t.warning=2]="warning",t[t.error=4]="error",t[t.enableBgm=8]="enableBgm",t[t.debugRuning=16]="debugRuning",t[t.onlyOneActionAnimate=32]="onlyOneActionAnimate",t[t.firstFreezing=64]="firstFreezing",t[t.secondFreezing=128]="secondFreezing",t[t.stopAfterSecond=256]="stopAfterSecond",t[t.fastTest=512]="fastTest",t[t.waitReady=1024]="waitReady",t[t.forbidHeartBeepCheck=2048]="forbidHeartBeepCheck",t[t.debugBits=4096]="debugBits",t[t.debugScene=8192]="debugScene",t[t.fastBitCountdown=16384]="fastBitCountdown",t[t.talkHistory=32768]="talkHistory",t[t.talkExit=65536]="talkExit",t[t.egretLog=131072]="egretLog",t[t.talkSystem=262144]="talkSystem",t[t.eosSystem=524288]="eosSystem",t[t.talkRandomName=1048576]="talkRandomName",t[t.goBtnForStart=2097152]="goBtnForStart",t[t.fakeLoginScatterFail=4194304]="fakeLoginScatterFail",t[t.strightToGame=8388608]="strightToGame",t[t.boardTest=16777216]="boardTest",t[t.fixAutoSize=33554432]="fixAutoSize",t[t.debugBgm=67108864]="debugBgm",t[t.displayTopMenu=134217728]="displayTopMenu",t[t.isEOSPublish=268435456]="isEOSPublish",t[t.talkNoticeOffline=536870912]="talkNoticeOffline",t[t.versionWarning=1073741824]="versionWarning"}(DM1||(DM1={}));var DM2;!function(t){t[t.NONE=0]="NONE",t[t.enableAnalytics=1]="enableAnalytics",t[t.alwaysStatistics=2]="alwaysStatistics",t[t.randomStatistics=4]="randomStatistics",t[t.forceLangEn=8]="forceLangEn",t[t.forceLangCh=16]="forceLangCh",t[t.forceLangKr=32]="forceLangKr",t[t.langAuto=64]="langAuto",t[t.forceBet=128]="forceBet",t[t.debugBtContact=256]="debugBtContact",t[t.demoTalkingServer=512]="demoTalkingServer",t[t.bidAlwaysInputAble=1024]="bidAlwaysInputAble"}(DM2||(DM2={}));var DM3;!function(t){t[t.NONE=0]="NONE"}(DM3||(DM3={}));var DM4;!function(t){t[t.NONE=0]="NONE"}(DM4||(DM4={}));var release=1,gameVersion="1.2.2",debug1,debug2,debug3,debug4;debug1=DM1.log|DM1.warning|DM1.error|DM1.enableBgm|DM1.secondFreezing|DM1.stopAfterSecond|DM1.onlyOneActionAnimate|DM1.waitReady|DM1.forbidHeartBeepCheck|DM1.talkExit|DM1.talkHistory|DM1.talkSystem|DM1.displayTopMenu|DM1.versionWarning,debug2=DM2.NONE|DM2.enableAnalytics|DM2.randomStatistics|DM2.langAuto|DM2.bidAlwaysInputAble,debug3=DM3.NONE,debug4=DM4.NONE,release&&(debug1=DM1.warning|DM1.error|DM1.enableBgm|DM1.secondFreezing|DM1.stopAfterSecond|DM1.onlyOneActionAnimate|DM1.waitReady|DM1.forbidHeartBeepCheck|DM1.talkExit|DM1.talkHistory|DM1.talkSystem|DM1.displayTopMenu|DM1.isEOSPublish|DM1.versionWarning,debug2=DM2.NONE|DM2.enableAnalytics|DM2.randomStatistics|DM2.langAuto,debug3=DM3.NONE,debug4=DM4.NONE);var VALUE_NONE=-1,Cf=function(){function t(){this.dicSpeeds={},this.poolSpeeds=[],this.info={totalEos:200,costEos:0,leftEos:-1},this.gameData={countdown:170,datas:{}},this.config={enableStatistic:!1,randSeedStatistic:.5,speedBitForMotion:1.3,speedBitForAnimate:1.2,distance:3796,btDisableAlpha:.4,btDefaultAlpha:1,alphaFocus:1,alphaDef:.35,alphaDisable:0,timeBoardClose:10,animateStand:"bone_stand_v7",animateRun:"bone_run_v10",scaleRunWay:.92,talkingServer:"https://chat.nakamoto.run:443/",talkingListMaxHistory:200,talkingListUnitDistance:4,timeUpdateInfo:10,timeCountDownAdd:10,timeCOuntDownOffset:1,historyMaxCount:30,offsetStageContent:{x:0,y:0}},this.dicBitsCountNext={},this.dicBitsCountSaved={},this.dicPlayerInfoById={},this.init(),egret.Tween.get(this).wait(0).call(this.delayInit,this),Notify.One().add(NotifyName.eos_result_update,this.onNotify,this)}return t.prototype.init=function(){DEBUG2(DM2.forceLangEn)?(Lang.SetDefLang(LangType.English),Lang.SetLang(LangType.English)):DEBUG2(DM2.forceLangCh)?(Lang.SetDefLang(LangType.English),Lang.SetLang(LangType.Chinese)):DEBUG2(DM2.forceLangKr)?(Lang.SetDefLang(LangType.English),Lang.SetLang(LangType.Korean)):DEBUG2(DM2.langAuto)?(Lang.SetLangAsDevice(),Lang.SetDefLang(LangType.English)):(Lang.SetDefLang(LangType.English),Lang.SetLang(LangType.English)),DEBUG2(DM2.alwaysStatistics)?this.config.enableStatistic=!0:DEBUG2(DM2.randomStatistics)&&Math.random()<this.config.randSeedStatistic&&(this.config.enableStatistic=!0),this.config.enableStatistic&&DEBUG2(DM2.enableAnalytics)||DWARN("Turn off Analytics"),this.dicPlayerInfoById[0]={id:0,name:"Nakamoto",intro:"Nour...I just \ndouble-spent my \ncheese!",desId:"①"},this.dicPlayerInfoById[1]={id:1,name:"Hal Finney",intro:"Why did Nakamoto \nsend me so many \nbugs? I don't eat bugs!",desId:"②"},this.dicPlayerInfoById[2]={id:2,name:"Laszlo",intro:"Can I have that pizza? \nHere's 20,000 BTC.",desId:"③"},this.dicPlayerInfoById[3]={id:3,name:"Wei Dai",intro:"Well, people call me a \nforerunner but I \npromise I'll never \nforerun the race!",desId:"④"},this.dicPlayerInfoById[4]={id:4,name:"Lamport",intro:"Time, clocks, \nand the ordering of \nevents in a race. \nHmm, good topic.",desId:"⑤"},this.dicPlayerInfoById[5]={id:5,name:"Vitalik",intro:"Why playing WoW? \nPlay Nakamoto.run!",desId:"⑥"},this.dicPlayerInfoById[6]={id:6,name:"Friedcat",intro:"I'm gone, \nbut my private key \nis not.",desId:"⑦"},this.dicPlayerInfoById[7]={id:7,name:"Hodler",intro:"Keep calm and Hodl \nRUN!",desId:"⑧"},this.speedCore=new SpeedCore,DEBUG1(DM1.fastTest)&&(this.config.speedBitForMotion*=10)},t.prototype.delayInit=function(){this.generateSpeed(),this.updateAuctionAdInfo()},t.prototype.reset=function(){this.clearBets()},t.prototype.generateSpeed=function(t){this.poolSpeeds=[];for(var e=0;24>e;e++)this.speedCore.reset(),this.dicSpeeds[e]={speeds:this.speedCore.speeds,length:this.speedCore.length,step:this.speedCore.step},this.poolSpeeds.push({speeds:this.speedCore.speeds,length:this.speedCore.length,step:this.speedCore.step});this.poolSpeeds.sort(function(t,e){return t.step>e.step?1:t.step<e.step?-1:t.length>e.length?1:t.length<e.length?-1:0});for(var n=this.poolSpeeds.length,e=n-1;e>=0;e--)e%3!=0&&this.poolSpeeds.splice(e,1);t?this.setWinData(t):this.setFakeGameData(),this.setWinHistory()},t.prototype.setWinHistory=function(){this.gameData.won1stIdsSeq=[0,3,4,6,7],this.gameData.won2ndIdsSeq=[1,2,5,3,6,7]},t.prototype.setWinData=function(t){for(var e=t.concat(),n=[5,6,4,1,0,3,2,7],i=0;i<e.length;i++){var a=e[i],o=n.indexOf(a);o>=0&&n.splice(o,1)}for(var i=0;10>i;i++)n.sort(RandomSeed);e=e.concat(n),this.gameData.seqGetId={},this.gameData.idGetSeq={};for(var i=0;i<e.length;i++)this.gameData.seqGetId[i]=e[i],this.gameData.idGetSeq[e[i]]=i},t.prototype.setFakeGameData=function(){for(var t=[5,6,4,1,0,3,2,7],e=0;10>e;e++)t.sort(RandomSeed);this.gameData.seqGetId={},this.gameData.idGetSeq={};for(var e=0;e<t.length;e++)this.gameData.seqGetId[e]=t[e],this.gameData.idGetSeq[t[e]]=e},t.prototype.addBets=function(t,e){this.dicBitsCountNext[t]||(this.dicBitsCountNext[t]=0),this.dicBitsCountNext[t]+=e,this.info.costEos+=e,this.info.leftEos=this.info.totalEos-this.info.costEos},t.prototype.checkBets=function(t){var e=this.dicBitsCountSaved[this.idsToStr(t)];return e?e:0},t.prototype.checkOverTheWinPool=function(t){var e={};for(var n in this.dicBitsCountSaved)n in e||(e[n]=0),e[n]+=this.dicBitsCountSaved[n];for(var n in this.dicBitsCountNext)n in e||(e[n]=0),e[n]+=this.dicBitsCountNext[n];t&&(t.idsStr in e||(e[t.idsStr]=0),e[t.idsStr]+=t.bet);var i=0,a=0;for(var n in e)2==n.length?a=Math.max(a,e[n]):i=Math.max(i,e[n]);var o=EOSSystem.One().getLimitPoolBets({bet1Maxnum:i,bet2Maxnum:a});return 0>o?(this.showTip(Lang.Val(LangKey.tip_betOutBoundOfWinPool)),!0):!1},t.prototype.saveBetsToServer=function(t){var e=this;return new Promise(function(n,i){var a={},o={};for(var s in e.dicBitsCountNext)e.dicBitsCountSaved[s]||(e.dicBitsCountSaved[s]=0),e.dicBitsCountSaved[s]+=e.dicBitsCountNext[s],delete e.dicBitsCountNext[s],1==s.length?a[parseInt(s)]=e.dicBitsCountSaved[s]:2==s.length&&(o[parseInt(s)]=e.dicBitsCountSaved[s]);e.info.costEos>0?null==t||0==t.isFake?EOSSystem.One().setBet({gameId:EOSSystem.One().data_gameInfo.rows[0].game_id,money:e.info.costEos,bets1:a,bets2:o}).then(function(t){n(t)})["catch"](function(t){DERR(t);try{i(JSON.parse(t))}catch(e){i(t)}}):n(null):(e.showTip(Lang.Val(LangKey.tip_betBeforeGo)),DERR(Lang.Val(LangKey.tip_betBeforeGo)),i(Lang.Val(LangKey.tip_betBeforeGo)))})},t.prototype.resetBets=function(){this.info.costEos=0;for(var t in this.dicBitsCountSaved)this.info.costEos+=this.dicBitsCountSaved[t];this.info.leftEos=this.info.totalEos-this.info.costEos;for(var t in this.dicBitsCountNext)delete this.dicBitsCountNext[t]},t.prototype.clearBets=function(){this.info.costEos=0,this.info.leftEos=this.info.totalEos-this.info.costEos;for(var t in this.dicBitsCountSaved)delete this.dicBitsCountSaved[t];for(var t in this.dicBitsCountNext)delete this.dicBitsCountNext[t]},t.prototype.checkRaceData=function(){return this.gameData.game_id in this.gameData.datas},t.prototype.forceRequireRaceData=function(){var t=this;this.checkRaceData()||(DLOG("ws forceRequireRaceData"),EOSSystem.One().getWinHistory().then(function(e){var n=e.rows[0].results;DLOG("ws forceRequireRaceData",n);for(var i=0;i<n.length;i++)if(n[i].game_id==t.gameData.game_id){var a=t.strToIds(n[i].result);t.gameData.datas[t.gameData.game_id]=a;break}DLOG("ws forceRequireRaceData",t.checkRaceData(),t.gameData.game_id,t.gameData.datas[t.gameData.game_id]),t.checkRaceData()&&t.generateSpeed(t.gameData.datas[t.gameData.game_id])})["catch"](function(t){}))},t.prototype.onNotify=function(t){if(t.name==NotifyName.eos_result_update){var e=t.userdata.result,n=t.userdata.game_id,i=this.strToIds(e);this.gameData.datas[n]=i,i&&i.length>1?this.generateSpeed(i):DERR("Bonus result error from server.")}},t.prototype.demoCheckWin=function(t){var e=this.strToIds(t),n=null;2==e.length&&(n=this.idsToStr([Math.min(e[0],e[1]),Math.max(e[0],e[1])]));this.idsToStr([e[0]]);e&&e.length>=1?this.generateSpeed(e):DERR("Bonus result error from server.")},t.prototype.updateAuctionAdInfo=function(){var t=this;return new Promise(function(e,n){EOSSystem.One().getAuctionAd().then(function(n){t.gameData.auctionInfo=n.rows[0],e(n)})["catch"](function(t){n(t)})})},t.prototype.idsToStr=function(t){return 1==t.length?String(t[0]+1):2==t.length?String(10*(t[0]+1)+(t[1]+1)):void 0},t.prototype.strToIds=function(t){return 1==t.length?[Number(t)-1]:2==t.length?[Number(t.charAt(0))-1,Number(t.charAt(1))-1]:void 0},t.prototype.showTip=function(e,n){n&&(e=t.One().f1(e,n)),Notify.One().post(NotifyName.system_notify,{msg:Lang.Val(e)}),DLOG(e)},t.prototype.fixNum=function(t){return 10>t?"0"+t:""+t},t.prototype.ranD=function(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e))+e},t.prototype.ranArr=function(t){return t[Math.floor(Math.random()*t.length)]},t.prototype.backFullSpaceFromKeyboard=function(){document.body.scrollHeight<document.originalH&&(document.body.style.height=document.originalH)},t.prototype.getTomorrowZeroTimestamp=function(){var t=this.getLocalTime(0),e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),n=t.getTime()+864e5-1e3*e;return n},t.prototype.getLocalTime=function(t){if("number"==typeof t){var e=new Date,n=e.getTime(),i=6e4*e.getTimezoneOffset(),a=n+i;return new Date(a+36e5*t)}},t.prototype.f1=function(t,e){return t.replace("#{1}",e)},t.One=function(){return this.__one||(this.__one=new t),this.__one},t}();__reflect(Cf.prototype,"Cf");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?i(a):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var TalkingType;!function(t){t[t.update=1]="update",t[t.history=2]="history",t[t.offline=3]="offline",t[t.setup=4]="setup",t[t.bet=5]="bet"}(TalkingType||(TalkingType={}));var LSKey=function(){function t(){}return t.lang="lang",t}();__reflect(LSKey.prototype,"LSKey");var LS=function(){function t(){}return t.Load=function(t,e){var n=egret.localStorage.getItem(t);return n?n:e},t.Save=function(t,e){egret.localStorage.setItem(t,e)},t}();__reflect(LS.prototype,"LS");var LangKey=function(){function t(){}return t.langName="langName",t.appName="appName",t.NONE="NONE",t.str_statistics="str_statistics",t.str_chatroom="str_chatroom",t.str_adsBidding="str_adsBidding",t.str_dividends="str_dividends",t.str_faq="str_faq",t.str_contact="str_contact",t.str_cycle="str_cycle",t.str_topBidder="str_topBidder",t.str_mySlogan="str_mySlogan",t.str_staking="str_staking",t.str_staked="str_staked",t.str_unstaked="str_unstaked",t.str_unclaimed="str_unclaimed",t.str_payoutPool="str_payoutPool",t.str_total="str_total",t.str_nextPayout="str_nextPayout",t.str_myEstimatedPayout="str_myEstimatedPayout",t.str_expectedPayoutPer1kRun="str_expectedPayoutPer1kRun",t.str_mining="str_mining",t.str_estimatedRunMinedToday="str_estimatedRunMinedToday",t.str_totalRunUnclaimed="str_totalRunUnclaimed",t.str_playNextRound="str_playNextRound",t.str_win="str_win",t.str_lose="str_lose",t.bt_game_restart="bt_game_restart",t.bt_bid_bidForMyAd="bt_bid_bidForMyAd",t.bt_bid_change="bt_bid_change",t.bt_div_stake="bt_div_stake",t.bt_div_unstake="bt_div_unstake",t.bt_div_claimAll="bt_div_claimAll",t.tip_inputEmpty="tip_inputEmpty",t.tip_chooseBetFirst="tip_chooseBetFirst",t.tip_noEnoughMoney="tip_noEnoughMoney",t.tip_noEnoughCoin="tip_noEnoughCoin",t.tip_betTimeOut="tip_betTimeOut",t.tip_betBeforeGo="tip_betBeforeGo",t.tip_hasBeted="tip_hasBeted",t.tip_betFull="tip_betFull",t.tip_serverDataNull="tip_serverDataNull",t.tip_noLogin="tip_noLogin",t.tip_betOutBoundOfWinPool="tip_betOutBoundOfWinPool",t.tip_roundBeted="tip_roundBeted",t.tip_invalid="tip_invalid",t.tip_failed="tip_failed",t.tip_operateSuccess="tip_operateSuccess",t.tip_transactionConfirmed="tip_transactionConfirmed",t.tip_errorF1="tip_errorF1",t.tip_bidLessMoney="tip_bidLessMoney",t.tip_cantEditSlogan="tip_cantEditSlogan",t.tip_emptySlogan="tip_emptySlogan",t.tip_waiting="tip_waiting",t
}();__reflect(LangKey.prototype,"LangKey");var Lang=function(){function t(){}return t.prototype.setLang=function(e){if(this.data=t.__dicLangData[e],!this.data)switch(e){case LangType.Chinese:t.__dicLangData[e]=RES.getRes("lang_cn_json");break;case LangType.Korean:t.__dicLangData[e]=RES.getRes("lang_kr_json");break;case LangType.English:default:t.__dicLangData[e]=RES.getRes("lang_en_json")}this.data=t.__dicLangData[e],null==this.data&&DERR("Language data error:",e)},t.prototype.val=function(e){var n=this.data[e];return null==n&&(n=t.__defData[e]),null==n&&(n=e),n},t.One=function(){return null==this.__single&&(this.__single=new t),this.__single},t.GetLang=function(t){var e=this.__dicLangData[t];if(!e)switch(t){case LangType.Chinese:this.__dicLangData[t]=RES.getRes("lang_cn_json");break;case LangType.Korean:this.__dicLangData[t]=RES.getRes("lang_kr_json");break;case LangType.English:default:this.__dicLangData[t]=RES.getRes("lang_en_json")}return this.__dicLangData[t]},t.SetDefLang=function(t){switch(void 0===t&&(t=LangType.English),this.__typeDef=t,t){case LangType.Chinese:this.__defData=RES.getRes("lang_cn_json");break;case LangType.Korean:this.__defData=RES.getRes("lang_kr_json");break;case LangType.English:default:this.__defData=RES.getRes("lang_en_json")}},t.SetLang=function(t){return this.__type=t,this.One().setLang(t)},t.GetLangType=function(){return this.__type},t.SetLangAsDevice=function(){var t,e=egret.Capabilities.language.toLowerCase();return t=e.indexOf("cn")>=0||e.indexOf("zh")>=0?LangType.Chinese:e.indexOf("ko")>=0||e.indexOf("kr")>=0?LangType.Korean:LangType.English,this.__type=t,this.One().setLang(t)},t.Val=function(t){return this.One().val(t)},t.__dicLangData={},t.__type=LangType.English,t.__typeDef=LangType.English,t}();__reflect(Lang.prototype,"Lang");var Notify=function(){function t(){this.dicNtfs={},DLOG("Notify::Init")}return t.prototype.post=function(t,e){if(void 0===e&&(e=null),null==this.dicNtfs[t])return void DLOG("Notify::NotListen::"+t);for(var n=this.dicNtfs[t],i=0;i<n.length;i++)n[i].post(e)},t.prototype.add=function(t,e,n){null==this.dicNtfs[t]&&(this.dicNtfs[t]=[]);for(var i in this.dicNtfs[t])if(this.dicNtfs[t].hasOwnProperty(i)&&this.dicNtfs[t][i].target==n)return void DWARN("Notify::Add::Repeat::"+t);var a=new NotifyObserve(t,n,e);this.dicNtfs[t].push(a)},t.prototype.clear=function(){DLOG("Notify::Clear");for(var t in this.dicNtfs)for(var e=this.dicNtfs[t],n=e.length-1;n>=0;n--)e[n].clear();this.dicNtfs={}},t.prototype.removeName=function(t){DLOG("Notify::Remove::"+t);for(var e in this.dicNtfs)if(t==e){for(var n=this.dicNtfs[e],i=n.length-1;i>=0;i--)n[i].clear();this.dicNtfs[e]=null,delete this.dicNtfs[e]}},t.prototype.removeTarget=function(t){DLOG("Notify::Remove::"+t);for(var e in this.dicNtfs)for(var n=this.dicNtfs[e],i=n.length-1;i>=0;i--)n[i].target==t&&(n[i].clear(),n.splice(i,1))},t.One=function(){return null==this.__single&&(this.__single=new t),this.__single},t}();__reflect(Notify.prototype,"Notify");var NotifyObserve=function(){function t(t,e,n){this.target=e,this.name=t,this.func=n}return t.prototype.post=function(t){this.userdata=t,this.func.call(this.target,this)},t.prototype.clear=function(){this.target=null,this.name=null,this.func=null,this.userdata=null},t}();__reflect(NotifyObserve.prototype,"NotifyObserve");var NotifyName=function(){function t(){}return t.lang_change="lang_change",t.system_gotoBackground="system_gotoBackground",t.system_fromBackground="system_fromBackground",t.system_notify="system_notify",t.btn_click="btn_click",t.talk_notify="talk_notify",t.game_runing_update="game_runing_update",t.game_pause="game_pause",t.game_startRun="game_startRun",t.game_update_history="game_update_history",t.game_update_seq="game_update_seq",t.game_finish_seq="game_finish_seq",t.game_finish_end="game_finish_end",t.board_gameFinal="board_gameFinal",t.board_adsBidding="board_adsBidding",t.board_dividendsInfo="board_dividendsInfo",t.board_help="board_help",t.board_contact="board_contact",t.eos_result_update="eos_result_update",t}();__reflect(NotifyName.prototype,"NotifyName");var ObjManagerType;!function(t){t[t.Unit_Bit=0]="Unit_Bit"}(ObjManagerType||(ObjManagerType={}));var OBJManager=function(){function t(){}return t.createTextfield=function(){if(this.pool.length>0)return this.pool.pop();var t=new egret.TextField;return t},t.destroyTextField=function(t){this.pool.push(t),t.parent&&(t.parent.removeChild(t),egret.Tween.removeTweens(t),t.scaleX=t.scaleY=1,t.alpha=1)},t.createNode=function(t,e){this.dicNode[e]||(this.dicNode[e]=[]);var n=null;if(0==this.dicNode[e].length){n=new t;var i=n,a=n;return n.objManagerType=e,a.addEventListener(egret.Event.ADDED_TO_STAGE,function(){i.onShow()},a),a}n=this.dicNode[e].pop();var o=n,a=n;return a.addEventListener(egret.Event.ADDED_TO_STAGE,function(){o.onShow()},a),a},t.DestroyNode=function(t){if(t&&"objManagerType"in t){var e=t,n=t;this.dicNode[t.objManagerType].push(e),n.parent&&(n.parent.removeChild(n),n.x=0,n.y=0,n.visible=!0,n.scaleX=1,n.scaleY=1,n.alpha=1,egret.Tween.removeTweens(n),e.onDestroy())}},t.createBone=function(t,e){if(!t)return null;var n;if(!this.dicBone[t]){var i=RES.getRes(t+"_tex_png"),a=RES.getRes(t+"_tex_json"),o=RES.getRes(t+"_ske_json");n=new dragonBones.EgretFactory,n.addDragonBonesData(dragonBones.ObjectDataParser.getInstance().parseDragonBonesData(o)),n.addTextureAtlasData(n.parseTextureAtlasData(a,i)),egret.startTick(this.onBoneTicker,this),this.dicBone[t]=n}var s=this.dicBone[t].buildArmature(e);return s},t.onBoneTicker=function(t){var e=t,n=e-this.TickBoneTime;return this.TickBoneTime=e,dragonBones.WorldClock.clock.advanceTime(n/1e3),!1},t.CreateImage=function(e){if(null==e||""==e)return null;null==t.dicIdle[e]&&(t.dicIdle[e]=[]);var n;if(t.dicIdle[e].length>0)n=t.dicIdle[e].shift();else{n=new egret.Bitmap;var i=RES.getRes(e);n.texture=i,n.res=e,t.totalCreatedCount_Image++}return n},t.DestroyImage=function(e){e.res?t.dicIdle[e.res].push(e):console.warn("OBJManager error recycle target"),egret.Tween.removeTweens(e),e.parent&&e.parent.removeChild(e)},t.CreateShape=function(){if(t.poolShapesIdle.length>0){var e=t.poolShapesIdle.pop();return e.x=0,e.y=0,e.alpha=1,e.scaleX=1,e.scaleY=1,e}var n=new egret.Shape;return t.totalCreatedCount_Shape++,n},t.DestroyShape=function(e){null!=e&&(e.parent&&e.parent.removeChild(e),e.graphics.clear(),delete e.data,egret.Tween.removeTweens(e),t.poolShapesIdle.push(e))},t.pool=[],t.dicNode={},t.dicBone={},t.TickBoneTime=0,t.dicIdle={},t.totalCreatedCount_Image=0,t.poolShapesIdle=[],t.totalCreatedCount_Shape=0,t}();__reflect(OBJManager.prototype,"OBJManager");var SoundManager=function(){function t(){this.isLoaded=!1,Notify.One().add(NotifyName.btn_click,this.onNotify,this)}return t.prototype.onNotify=function(t){t.name==NotifyName.btn_click&&this.load()},t.prototype.load=function(){if(!this.isLoaded){this.isLoaded=!0;for(var t=[SoundName.tag_sfx_betDown,SoundName.tag_sfx_readygo],e=0;e<t.length;e++){var n=document.getElementById(t[e]);n.load()}}},t.prototype.play=function(t,e){void 0===e&&(e=!0);var n=document.getElementById(t);n&&(n.play(),n.currentTime=0)},t.prototype.pause=function(t){var e=document.getElementById(t);e&&e.pause()},t.One=function(){return this.__one||(this.__one=new t),this.__one},t}();__reflect(SoundManager.prototype,"SoundManager");var SoundName=function(){function t(){}return t.tag_bgm_game="bgmGame",t.tag_bgm_bets="bgmBet",t.tag_sfx_readygo="sfxReadyGo",t.tag_sfx_betDown="sfxBetdown",t.bgm_game="resource/res_unpackage/bgm_game.mp3",t.sfx_readygo="resource/res_unpackage/sfx_readygo.mp3",t}();__reflect(SoundName.prototype,"SoundName");var SoundPlus=function(){function t(){this.isLoaded=!1,this.snd=new egret.Sound}return t.prototype.load=function(t){this.url=t,this.snd.load(t),this.snd.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sndChannel=null},t.prototype.onLoadComplete=function(t){DLOG("Sound load compelte:"+this.url),this.isLoaded=!0},t.prototype.play=function(t,e){return this.isLoaded?(this.sndChannel=this.snd.play(t,e),this.sndChannel):(DLOG("Sound not load compelte:"+this.url),null)},t.prototype.fadeIn=function(t,e,n){return void 0===n&&(n=1e3),this.isLoaded?(this.sndChannel=this.snd.play(t,e),void(null!=this.sndChannel&&(egret.Tween.removeTweens(this),this.__volume=0,egret.Tween.get(this,{onChange:this.onVolumeChange,onChangeObj:this}).to({__volume:1},n)))):void DLOG("Sound not load compelte:"+this.url)},t.prototype.fadeOut=function(t){return void 0===t&&(t=2500),this.isLoaded?void(null!=this.sndChannel&&(egret.Tween.removeTweens(this),this.__volume=1,egret.Tween.get(this,{loop:!1,onChange:this.onVolumeChange,onChangeObj:this}).to({__volume:.1},t).call(this.stop,this))):void DLOG("Sound not load compelte:"+this.url)},t.prototype.onVolumeChange=function(){this.sndChannel&&(this.sndChannel.volume=this.__volume)},t.prototype.stop=function(){this.sndChannel&&this.sndChannel.stop(),this.sndChannel=null},t}();__reflect(SoundPlus.prototype,"SoundPlus");var SpeedCore=function(){function t(){this.length=0,this.step=0}return t.prototype.reset=function(){var t=PoolSpeedsNormal.concat(PoolSpeedsNormal,PoolSpeedsNormal),e=[0,1,2];e.sort(RandomSeed);var n=PoolSpeeds1[e[0]],i=PoolSpeeds2[e[0]],a=PoolSpeeds3[e[0]],o=n.concat(n,n,n,n,n,n,n,n),s=i.concat(i,i,i,i,i,i,i,i),r=a.concat(a,a,a,a,a,a,a,a,a);o.sort(RandomSeed),s.sort(RandomSeed),r.sort(RandomSeed),o=RandomArr(o.sort(RandomSeed)),s=RandomArr(s.sort(RandomSeed)),r=RandomArr(r.sort(RandomSeed)),this.speeds=t.concat(o,s,r);var h=0,l=0,c=-1;this.length=0;for(var d=0,u=0,p=0;;){d++;var f=Math.floor(h/5);if(f>=this.speeds.length&&(h=0,f=Math.floor(h/5)),c!=f&&(c=f,l=this.speeds[f],l*=Cf.One().config.speedBitForMotion),u+=(l+p-u)/15,this.length+=u,h++,this.length>=Cf.One().config.distance)break}this.step=d},t}();__reflect(SpeedCore.prototype,"SpeedCore");var res_version="1.2.7",Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createGameScene=function(){var t=this;if(DEBUG1(DM1.versionWarning)){var e=egret.Capabilities.language.toLowerCase();DWARN("ver"+gameVersion+(release?"r":"d")+" res"+res_version+" lang."+e)}switch(Cf.One(),Cf.One().stage=this.stage,Cf.One().stageSize={width:this.stage.stageWidth,height:this.stage.stageHeight},Cf.One().reset(),egret.MainContext.deviceType){case egret.MainContext.DEVICE_MOBILE:AnalyticsSystem.One().platfom(PlatfomType.mobile);break;case egret.MainContext.DEVICE_PC:AnalyticsSystem.One().platfom(PlatfomType.pc)}egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){switch(egret.MainContext.deviceType){case egret.MainContext.DEVICE_MOBILE:SoundManager.One().pause(SoundName.tag_bgm_game),SoundManager.One().pause(SoundName.tag_bgm_bets),egret.ticker.pause(),Notify.One().post(NotifyName.system_gotoBackground);break;default:Notify.One().post(NotifyName.system_gotoBackground)}},egret.lifecycle.onResume=function(){switch(egret.MainContext.deviceType){case egret.MainContext.DEVICE_MOBILE:egret.ticker.resume(),t.restartScene(),Notify.One().post(NotifyName.system_fromBackground);break;default:SceneCore.GetCurrentScene()instanceof Scene_Bets&&t.restartScene(),Notify.One().post(NotifyName.system_fromBackground)}},this.initScene()},e.prototype.initScene=function(){var t=this;return DEBUG1(DM1.boardTest)?(this.hideLoadResource(),void this.addChild(new BoardFinal)):void(DEBUG1(DM1.strightToGame)?(DLOG("goto game stright"),egret.Tween.get(this).wait(1e3).call(function(){t.gotoGamePrepare({gotoGameStright:!0})})):DEBUG1(DM1.fakeLoginScatterFail)?(EOSSystem.One().fakeLoginWithoutScatter(),DLOG("don't have scatter"),this.gotoGamePrepare()):EOSSystem.One().loginPlus().then(function(e){DLOG("has scatter:",EOSSystem.One().getAccountName()),t.gotoGamePrepare()})["catch"](function(e){DLOG("don't have scatter:"),t.gotoGamePrepare()}))},e.prototype.restartScene=function(){SceneCore.GotoScene(SceneType.Game_Bet)},e.prototype.gotoGamePrepare=function(t){var e=this;return t&&t.gotoGameStright?(this.hideLoadResource(),Cf.One().generateSpeed(),void SceneCore.GotoScene(SceneType.Game_Running,this.stage,!0)):void EOSSystem.One().getGameInfo().then(function(t){var n=new Date,i=new Date(1e3*t.rows[0].endtime),a=i.valueOf()-n.valueOf();a+=Cf.One().config.timeCountDownAdd-Cf.One().config.timeCOuntDownOffset,a>1e4?(e.hideLoadResource(),SceneCore.GotoScene(SceneType.Game_Bet,e.stage,!0)):(e.hideLoadResource(),Cf.One().generateSpeed(),SceneCore.GotoScene(SceneType.Game_Running,e.stage,!0))})["catch"](function(t){DLOG("err",t)})},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),RES.getVirtualUrl=function(t){return t+"?v="+res_version},egret.lifecycle.addLifecycleListener(function(t){}),DEBUG1(DM1.forbidHeartBeepCheck)||(egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()});var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.stage.frameRate=60,this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[4,RES.loadGroup("preload")];case 3:return e.sent(),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),[4,RES.loadGroup("scence",0,this.loadingView)];case 4:return e.sent(),[3,6];case 5:return t=e.sent(),console.error(t),[3,6];case 6:return[2]}})})},e.prototype.hideLoadResource=function(){this.loadingView&&this.loadingView.parent&&(this.loadingView.parent.removeChild(this.loadingView),this.loadingView=null)},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var i=new eui.Theme("resource/default.thm.json",t.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Board_Running=function(t){function e(){var e=t.call(this)||this;e.focusWidth=640,e.focusMin=0,e.focusMax=0,e.focusPot=0,e.range={min:0,max:0},e.rangeOfRunner={min:0,max:0},e.scaleX=e.scaleY=Cf.One().config.scaleRunWay;for(var n=0;8>n;n++){var i=new AnimalStander;i.id=n,i.updateId(),e.poolAnimate.push(i)}return e}return __extends(e,t),e.prototype.onShow=function(){t.prototype.onShow.call(this),Notify.One().add(NotifyName.game_pause,this.onNotify,this),DEBUG1(DM1.waitReady)?(this.reset(),SoundManager.One().play(SoundName.tag_sfx_readygo,!1),this.loopCountdown()):(this.reset(),this.startMove())},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.focusMin=.5*this.focusWidth,this.focusMax=this.width-.5*this.focusWidth,this.range.min=0,this.range.max=Cf.One().config.distance},e.prototype.onNotify=function(t){if(t.name==NotifyName.game_pause)for(var e=0;e<this.poolAnimate.length;e++){var n=this.poolAnimate[e];n.stopMove()}},e.prototype.pauseRunning=function(){DLOG("pauseRunning");for(var t=0,e=0;e<this.poolAnimate.length;e++){var n=this.poolAnimate[e];n.stopMove(),n.isFinished&&n.numFinish<2&&t++}if(DLOG("isFSDone",t),2>t||!DEBUG1(DM1.stopAfterSecond));else{var i=[];i.push(Cf.One().gameData.seqGetId[0]),i.push(Cf.One().gameData.seqGetId[1]),Notify.One().post(NotifyName.game_update_seq,i),this.removeEventListener(egret.Event.ENTER_FRAME,this.onUpdate,this),Notify.One().post(NotifyName.game_finish_end)}},e.prototype.startMove=function(){Notify.One().post(NotifyName.game_startRun),this.addEventListener(egret.Event.ENTER_FRAME,this.onUpdate,this);for(var t=0;t<this.poolAnimate.length;t++){var e=this.poolAnimate[t];e.startMove()}},e.prototype.onUpdate=function(){var t=!1;this.rangeOfRunner.min=this.range.max,this.rangeOfRunner.max=this.range.min;var e=this.poolAnimate.concat();e.sort(function(t,e){return t.x>e.x?-1:t.x<e.x?1:0});for(var n=[],i=0;i<e.length;i++)n.push(e[i].id);Notify.One().post(NotifyName.game_update_seq,n);for(var i=0;i<this.poolAnimate.length;i++){var a=this.poolAnimate[i];a.onUpdate(),!a.isFinished&&a.x>=this.range.max&&(a.isFinished=!0,t=!0,Notify.One().post(NotifyName.game_finish_seq,{target:a}),a.numFinish<2&&(0==a.numFinish&&DEBUG1(DM1.firstFreezing)||1==a.numFinish&&DEBUG1(DM1.secondFreezing),this.showFlag(i,a.numFinish))),this.rangeOfRunner.min>a.x&&(this.rangeOfRunner.min=a.x),this.rangeOfRunner.max<a.x&&(this.rangeOfRunner.max=a.x)}this.rangeOfRunner.max+=120,this.rangeOfRunner.max>this.range.max-120&&(this.rangeOfRunner.max=this.range.max-120),this.rangeOfRunner.max-this.rangeOfRunner.min>this.focusWidth&&(this.rangeOfRunner.min=this.rangeOfRunner.max-this.focusWidth),this.focusPot=.5*(this.rangeOfRunner.max+this.rangeOfRunner.min+120),this.x=(-Math.max(Math.min(this.focusPot,this.focusMax),this.focusMin)+.5*this.focusWidth)*Cf.One().config.scaleRunWay,Notify.One().post(NotifyName.game_runing_update),t&&this.pauseRunning()},e}(Board_Running_Core);__reflect(Board_Running.prototype,"Board_Running");var BoardAdsBidding=function(t){function e(){var e=t.call(this)||this;return e.coin_run=VALUE_NONE,e}return __extends(e,t),e.prototype.onShow=function(){this.txtSelfInput&&(this.txtSelfInput.textDisplay.size=35,this.txtSelfInput.textDisplay.wordWrap=!0,this.txtSelfInput.textDisplay.multiline=!0),this.txtBidMoneyInput&&(this.txtBidMoneyInput.textDisplay.size=25),this.refreshDataInfo()},e.prototype.fadeIn=function(){this.visible=!0,this.txtTopPlayer.text="",this.txtSelfInput.text="",this.txtBidMoneyInput.text="",this.txtTimeCountdown.text="",t.prototype.fadeIn.call(this),this.onShow()},e.prototype.refreshDataInfo=function(){var t=this;this.coin_run=VALUE_NONE,EOSSystem.One().getCoin().then(function(e){e.rows.length>0?t.coin_run=EOSSystem.MoneyFromStr(e.rows[0].balance):t.coin_run=VALUE_NONE})["catch"](function(e){t.coin_run=VALUE_NONE}),Cf.One().updateAuctionAdInfo().then(function(e){t.data_auction=Cf.One().gameData.auctionInfo,DLOG("");var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),a=6e4*n.getTimezoneOffset();t.time_bidEnd=new Date(i.getTime()+864e5+a),t.txtCycleTimes.text=Cf.One().f1(Lang.Val(LangKey.str_cycle),""+t.data_auction.game_id),t.txtTopBidder.text=Lang.Val(LangKey.str_topBidder),t.txtTopPlayer.text=t.data_auction.player+"  @  "+t.data_auction.amount,t.data_auction.player?t.txtSelfInput.prompt="Currently owned by "+t.data_auction.player+" before next UTC 00:00. Click here to change if you are the owner.":t.txtSelfInput.prompt="Click here to change if you are the owner.",t.data_auction.owner==EOSSystem.One().getAccountName()?(t.txtSelfInput.text="",t.setEnableEditSlogan(!0)):(t.txtSelfInput.text="",DEBUG2(DM2.bidAlwaysInputAble)?t.setEnableEditSlogan(!0):t.setEnableEditSlogan(!1)),t.updateCountDown()})["catch"](function(t){})},e.prototype.updateCountDown=function(){if(!this.time_bidEnd)return void egret.Tween.get(this).wait(1e3).call(this.updateCountDown,this);var t=new Date,e=t.getTime(),n=6e4*t.getTimezoneOffset(),i=new Date(e+n),a=this.time_bidEnd.getTime(),o=i.getTime();if(a-o>0){var s=new Date(a-o);this.txtTimeCountdown.text=""+Math.floor(s.getHours()/10)+s.getHours()%10+":"+Math.floor(s.getMinutes()/10)+s.getMinutes()%10+":"+Math.floor(s.getSeconds()/10)+s.getSeconds()%10}else this.txtTimeCountdown.text="00:00:00";egret.Tween.get(this).wait(1e3).call(this.updateCountDown,this)},e.prototype.cancelCountDown=function(){egret.Tween.removeTweens(this)},e.prototype.setEnableBid=function(t){this.txtBidMoneyInput.touchEnabled=t},e.prototype.setEnableEditSlogan=function(t){this.txtSelfInput.touchEnabled=t,this.txtSelfInput.textDisplay.touchEnabled=t},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),Lang.GetLangType()==LangType.Chinese?(this.txtCycleTimes.font="cn_fat_white_fnt",this.txtTopBidder.font="cn_fat_white_fnt",this.txtBtnBid.font="cn_fat_white_fnt",this.txtTitleMySlogan.font="cn_fat_white_fnt",this.txtBtnChange.font="cn_fat_white_fnt"):Lang.GetLangType()==LangType.Korean?(this.txtCycleTimes.font="kr_fat_white_fnt",this.txtTopBidder.font="kr_fat_white_fnt",this.txtBtnBid.font="kr_fat_white_fnt",this.txtTitleMySlogan.font="kr_fat_white_fnt",this.txtBtnChange.font="kr_fat_white_fnt"):(this.txtCycleTimes.font="en_fat_white_fnt",this.txtTopBidder.font="en_fat_white_fnt",this.txtBtnBid.font="en_fat_white_fnt",this.txtTitleMySlogan.font="en_fat_white_fnt",this.txtBtnChange.font="en_fat_white_fnt"),this.txtCycleTimes.setColor(14858380),this.txtTimeCountdown.setColor(14858380),this.txtTopBidder.setColor(14858380),this.txtTopPlayer.setColor(14858380),this.txtMoneyUnit.setColor(14858380),this.txtTitleMySlogan.setColor(14858380),this.txtBtnBid.setColor(6833967),this.txtBtnChange.setColor(6833967),DEBUG2(DM2.bidAlwaysInputAble)||this.setEnableEditSlogan(!1),this.txtTitleMySlogan.text=Lang.Val(LangKey.str_mySlogan),this.txtBtnBid.text=Lang.Val(LangKey.bt_bid_bidForMyAd),this.txtBtnChange.text=Lang.Val(LangKey.bt_bid_change),this.bt_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.cancelCountDown(),e.hide()},this),this.btBid.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=parseFloat(e.txtBidMoneyInput.text);isNaN(t)?Cf.One().showTip(Lang.Val(LangKey.tip_inputEmpty)):e.coin_run==VALUE_NONE?Cf.One().showTip(Lang.Val(LangKey.tip_noEnoughCoin)):t>e.coin_run?Cf.One().showTip(Lang.Val(LangKey.tip_noEnoughCoin)):t<=EOSSystem.MoneyFromStr(e.data_auction.amount)?Cf.One().showTip(Lang.Val(LangKey.tip_bidLessMoney)):EOSSystem.One().setAuctionAd({money:t}).then(function(t){Cf.One().showTip(Lang.Val(LangKey.tip_transactionConfirmed)),e.refreshDataInfo()})["catch"](function(t){DWARN("setAuctionAd",t),Cf.One().showTip(Lang.Val(LangKey.tip_errorF1),t.error.details[0].message)})},this),this.btChange.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.data_auction.owner!=EOSSystem.One().getAccountName()?Cf.One().showTip(Lang.Val(LangKey.tip_cantEditSlogan)):0==e.txtSelfInput.text.length?Cf.One().showTip(Lang.Val(LangKey.tip_emptySlogan)):EOSSystem.One().modifyAdWord({adWord:e.txtSelfInput.text}).then(function(t){Cf.One().showTip(Lang.Val(LangKey.tip_transactionConfirmed))})["catch"](function(t){DWARN("modifyAdWord",t),Cf.One().showTip(Lang.Val(LangKey.tip_errorF1),t.error.details[0].message)})},this),this.createBg()},e}(BoardCore);__reflect(BoardAdsBidding.prototype,"BoardAdsBidding");var BoardContact=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/BoardContact.exml",e}return __extends(e,t),e.prototype.fadeIn=function(){this.visible=!0,t.prototype.fadeIn.call(this)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.contact_bt_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.hide()},this),this.telegram_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window&&window.open("https://t.me/NakamotoRun")},this),this.twitter_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window&&window.open("https://twitter.com/tied_tighter")},this),this.medium_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window&&window.open("https://medium.com/@tiedtighter")},this),this.gmail_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window&&window.open("mailto:biz@tiedtighter.com")},this),this.createBg()},e}(BoardCore);__reflect(BoardContact.prototype,"BoardContact");var BoardDividendsInfo=function(t){function e(){var e=t.call(this)||this;return e.selfInfo={staked:"0.0000 RUN",payout:0,totalout:"0.0000 EOS"},e.systemInfo={total_staked:"0.0000 RUN",total_share:"0.0000 EOS",earnings_per_share:"0x00000000000000000000000000000000"},e.selfBalance={balance:"0.0000 RUN"},e.systemBalance={balance:"0.0000 EOS"},e.stakeStatus=!0,e.unStakeStatus=!0,e.claimStatus=!0,e.claimTwoStatus=!0,e.selfInfo={},e.systemInfo={},e.systemBalance={},e.selfBalance={},e.skinName="resource/eui_skins/BoardDividendsInfo.exml",e}return __extends(e,t),e.prototype.fadeIn=function(){this.visible=!0,t.prototype.fadeIn.call(this),this.selfInfo={},this.systemInfo={},this.systemBalance={},this.selfBalance={},this.getInfo(),this.countDown(),this.dvidends_input.enabled=!0,this.dvidends_input.maxChars=20,this.stopTimer(),this.timer=new egret.Timer(5e3,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.getInfo,this),this.timer.start()},e.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer=null)},e.prototype.getInfo=function(){var t=this;EOSSystem.One().getCoin().then(function(e){DLOG(e,"getCoin"),e.rows&&0!==e.rows.length||(e.rows=[{balance:"0.0000 RUN"}]),t.selfBalance=e.rows[0],t.unstaked_text.text=t.selfBalance.balance})["catch"](function(t){DLOG("err",t)}),EOSSystem.One().getSelfTransfer().then(function(e){DLOG(e),e.rows&&0!==e.rows.length||(e.rows=[{staked:"0.0000 RUN",payout:0,totalout:"0.0000 EOS"}]),t.selfInfo=e.rows[0],t.staked_text.text=t.selfInfo.staked;var n=parseFloat(t.selfInfo.staked.split(" ")[0]);EOSSystem.One().getGlobalTransfer().then(function(e){DLOG(e),e.rows&&0!==e.rows.length||(e.rows=[{total_staked:"0.0000 RUN",total_share:"0.0000 EOS",earnings_per_share:"0x00000000000000000000000000000000"}]),t.systemInfo=e.rows[0],t.systemInfo.earnings_per_share=parseInt(t.systemInfo.earnings_per_share.substr(2).match(/.{1,2}/g).reverse().join(""),16)||0;var i=parseFloat(t.systemInfo.total_staked.split(" ")[0]),a=(n*t.systemInfo.earnings_per_share*1e4/Math.pow(2,32)-t.selfInfo.payout)/1e4;0>a?t.unclaimed_text.text="0.0000 EOS":t.unclaimed_text.text=a.toFixed(4)+" EOS",EOSSystem.One().getSystemMoney().then(function(e){DLOG(e,"getMoney"),e.rows&&0!==e.rows.length||(e.rows=[{balance:"0.0000 EOS"}]),t.systemBalance=e.rows[0];var a=parseFloat(t.systemBalance.balance.split(" ")[0]),o=(n/i*a).toFixed(4),s=(1e3/i*a).toFixed(4);t.total_text.text=t.systemBalance.balance||"","Infinity"===o||"NaN"===o?t.payout.text="0.0000 EOS":t.payout.text=o+" EOS","Infinity"===s||"NaN"===s?t.payout_per.text="0.0000 EOS":t.payout_per.text=s+" EOS"})["catch"](function(t){DLOG("err",t)})})["catch"](function(t){DLOG("err",t)})})["catch"](function(t){DLOG("err",t)}),EOSSystem.One().getGlobalCost().then(function(e){DLOG(e,"getGlobalCost"),t.systemCost=e.rows||[],t.systemCost=t.systemCost.sort(function(t,e){return e.current_id-t.current_id}),EOSSystem.One().getSelfEosCost().then(function(e){DLOG(e,"getSelfCost"),t.selfCost=e.rows||[],t.selfCost=t.selfCost.sort(function(t,e){return e.current_id-t.current_id});var n=0,i=0;if(t.selfCost.forEach(function(e){var i=t.systemCost.slice(1),a=i.filter(function(t){return t.current_id===e.current_id}),o="0";a.length>0&&(o=(e.amount.split(" ")[0]/a[0].totalAmount.split(" ")[0]*2100).toFixed(4)),"NaN"!==o&&"Infinity"!==o&&(n+=parseFloat(o))}),t.total_unclaimed_text.text=n.toFixed(4)+" RUN",t.selfCost.length>0&&t.systemCost.length>0){if(t.selfCost[0].current_id===t.systemCost[0].current_id){var a=(t.selfCost[0].amount.split(" ")[0]/t.systemCost[0].totalAmount.split(" ")[0]).toFixed(4);"NaN"!==a&&"Infinity"!==a&&(i+=parseFloat(a)),t.mined_today_text.text=(2100*i).toFixed(4)+" RUN"}}else t.mined_today_text.text=i.toFixed(4)+" RUN"})["catch"](function(t){DLOG("err",t)})})["catch"](function(t){DLOG("err",t)})},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.txt1.text=Lang.Val(LangKey.str_staking),this.txt2.text=Lang.Val(LangKey.str_staked)+":",this.txt3.text=Lang.Val(LangKey.str_unstaked)+":",this.txt5.text=Lang.Val(LangKey.str_dividends),this.txt6.text=Lang.Val(LangKey.str_unclaimed),this.txt7.text=Lang.Val(LangKey.str_payoutPool),this.txt8.text=Lang.Val(LangKey.str_total)+":",this.txt9.text=Lang.Val(LangKey.str_nextPayout)+":",this.txt10.text=Lang.Val(LangKey.str_myEstimatedPayout),this.txt11.text=Lang.Val(LangKey.str_expectedPayoutPer1kRun),this.txt12.text=Lang.Val(LangKey.str_mining),this.txt13.text=Lang.Val(LangKey.str_estimatedRunMinedToday),this.txt14.text=Lang.Val(LangKey.str_totalRunUnclaimed),this.stack_btn.text=Lang.Val(LangKey.bt_div_stake),this.unstack_btn.text=Lang.Val(LangKey.bt_div_unstake),this.claim_all_btn.text=Lang.Val(LangKey.bt_div_claimAll),this.claim_all_btn1.text=Lang.Val(LangKey.bt_div_claimAll);for(var n=0;20>n;n++){var i=this["txt"+n];i&&i.setColor(14858380),i&&i.font&&(Lang.GetLangType()==LangType.Chinese?i.font="cn_fat_white_fnt":Lang.GetLangType()==LangType.Korean?i.font="kr_fat_white_fnt":i.font="en_fat_white_fnt")}for(var a=[this.staked_text,this.unstaked_text,this.unclaimed_text,this.total_text,this.countdown_text,this.payout,this.payout_per,this.mined_today_text,this.total_unclaimed_text],n=0;n<a.length;n++){var i=a[n];i&&i.setColor(14858380),i&&i.font&&(Lang.GetLangType()==LangType.Chinese?i.font="cn_fat_white_fnt":Lang.GetLangType()==LangType.Korean?i.font="kr_fat_white_fnt":i.font="en_fat_white_fnt")}for(var o=[this.stack_btn,this.unstack_btn,this.claim_all_btn,this.claim_all_btn1],n=0;n<o.length;n++){var i=o[n];i&&i.setColor(6833967),i&&i.font&&(Lang.GetLangType()==LangType.Chinese?i.font="cn_fat_white_fnt":Lang.GetLangType()==LangType.Korean?i.font="kr_fat_white_fnt":i.font="en_fat_white_fnt")}this.btArrawUp.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=Math.max(e.dvidends_scroller.viewport.scrollV-520,0);egret.Tween.get(e.dvidends_scroller.viewport).to({scrollV:t},200)},this),this.btArrawDown.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=Math.min(e.dvidends_scroller.viewport.scrollV+520,e.dvidends_scroller.viewport.height);egret.Tween.get(e.dvidends_scroller.viewport).to({scrollV:t},200)},this),this.dvidends_bt_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.stopTimer(),e.hide()},this),this.unstack_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.unStackAction,this),this.stack_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stackAction,this),this.claim_all_btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.claimTwoAction,this),this.claim_all_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.claimAction,this),this.createBg()},e.prototype.countDown=function(t){var e=this;void 0===t&&(t=!0),egret.Tween.removeTweens(this);var n=Cf.One().getLocalTime(0).valueOf(),i=Cf.One().getTomorrowZeroTimestamp();this.dateOffset=Math.floor((i-n)/1e3);var a=Math.floor(this.dateOffset/60/60),o=Math.floor((this.dateOffset-3600*a)/60),s=Math.floor((this.dateOffset-3600*a-60*o)%60);this.countdown_text.text=Cf.One().fixNum(a)+":"+Cf.One().fixNum(o)+":"+Cf.One().fixNum(s),(a||o||s)&&egret.Tween.get(this).wait(1e3).call(function(){e.countDown()})},e.prototype.stackAction=function(){var t=this;console.log(this.dvidends_input.text);var e=parseFloat(this.dvidends_input.text).toFixed(4);if("NaN"!==e&&"Infinity"!==e){var n=parseFloat(e),i=parseFloat(this.selfBalance.balance.split(" ")[0]);i>=n&&n>0&&this.stakeStatus?(this.stakeStatus=!1,EOSSystem.One().stakeAction({amount:n.toFixed(4)+" RUN",action:"stake"}).then(function(e){t.stakeStatus=!0,e.code&&402==e.code?DLOG(e.message):t.getInfo(),DLOG(e,"stakeAction")})["catch"](function(e){t.stakeStatus=!0,Cf.One().showTip(Lang.Val(LangKey.tip_failed)),DLOG("err",e)})):this.stakeStatus?(Cf.One().showTip(Lang.Val(LangKey.tip_invalid)),DLOG("invalid number")):DLOG("multiple operations")}else Cf.One().showTip(Lang.Val(LangKey.tip_inputEmpty))},e.prototype.unStackAction=function(){var t=this;console.log(this.dvidends_input.text);var e=parseFloat(this.dvidends_input.text).toFixed(4);if("NaN"!==e&&"Infinity"!==e){var n=parseFloat(e),i=parseFloat(this.selfInfo.staked.split(" ")[0]);i>=n&&n>0&&this.unStakeStatus?(this.unStakeStatus=!1,EOSSystem.One().unStakeAction({amount:n.toFixed(4)+" RUN"}).then(function(e){t.unStakeStatus=!0,e.code&&402==e.code?DLOG(e.message):t.getInfo(),DLOG(e,"unStackAction")
})["catch"](function(e){t.unStakeStatus=!0,Cf.One().showTip(Lang.Val(LangKey.tip_failed)),DLOG("err",e)})):this.unStakeStatus?(Cf.One().showTip(Lang.Val(LangKey.tip_invalid)),DLOG("invalid number")):DLOG("multiple operations")}else Cf.One().showTip(Lang.Val(LangKey.tip_inputEmpty))},e.prototype.claimAction=function(){var t=this;DLOG("claimAction");var e=parseFloat(this.unclaimed_text.text.split(" ")[0]);this.claimStatus&&e>0?(this.claimStatus=!1,EOSSystem.One().claimAction().then(function(e){t.claimStatus=!0,e.code&&402==e.code?DLOG(e.message):t.getInfo(),DLOG(e,"claimAction")})["catch"](function(e){t.claimStatus=!0,Cf.One().showTip(Lang.Val(LangKey.tip_failed)),DLOG("err",e)})):(DLOG("insufficient balance"),Cf.One().showTip(Lang.Val(LangKey.tip_inputEmpty)))},e.prototype.claimTwoAction=function(){var t=this;DLOG("claimTwoAction");var e=parseFloat(this.total_unclaimed_text.text.split(" ")[0]);this.claimTwoStatus&&e>0?(this.claimTwoStatus=!1,EOSSystem.One().setGetToken().then(function(e){t.claimTwoStatus=!0,e.code&&402==e.code?DLOG(e.message):t.getInfo(),DLOG(e,"claimTwoAction")})["catch"](function(e){t.claimTwoStatus=!0,Cf.One().showTip(Lang.Val(LangKey.tip_failed)),DLOG("err",e)})):(DLOG("insufficient balance"),Cf.One().showTip(Lang.Val(LangKey.tip_inputEmpty)))},e}(BoardCore);__reflect(BoardDividendsInfo.prototype,"BoardDividendsInfo");var BoardFAQ=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/BoardFAQ.exml",e}return __extends(e,t),e.prototype.fadeIn=function(){this.visible=!0,t.prototype.fadeIn.call(this)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.faq_bt_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.hide()},this),DWARN("lang",Lang.GetLangType()),Lang.GetLangType()==LangType.Chinese?this.faq_list=RES.getRes("faq_cn_json").faq_list:Lang.GetLangType()==LangType.Korean?this.faq_list=RES.getRes("faq_kr_json").faq_list:this.faq_list=RES.getRes("faq_en_json").faq_list,this.initFAQ(),this.bindClick(),this.createBg()},e.prototype.bindClick=function(){var t=this;this.question_list.forEach(function(e){e.addEventListener(egret.TextEvent.LINK,t.handleClick,t)}),this.answer_list.forEach(function(e){e.addEventListener(egret.TextEvent.LINK,t.handleClick,t)}),this.img_list.forEach(function(e){e.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handleTap,t)})},e.prototype.handleClick=function(t){console.log(t.text),this.calculatedOffset(parseInt(t.text))},e.prototype.handleTap=function(t){console.log(t.target.name),this.calculatedOffset(parseInt(t.target.name))},e.prototype.initFAQ=function(){var t=this;this.question_list=[],this.answer_list=[],this.img_list=[],this.faq_list.forEach(function(e,n){var i=[],a=[];e.answer_list.forEach(function(t,e){var n;n={style:{bold:t.type.includes("bold"),italic:t.type.includes("italic")},text:t.text},t.type.includes("href")&&(n.style.href=t.href),a.push(n)}),i.push({text:"+ "+e.question,style:{href:"event:"+n}});var o=new egret.TextField;o.width=t.faq_scroller.width,o.touchEnabled=!0,o.wordWrap=!0,o.textFlow=new(Array.bind.apply(Array,[void 0].concat(i)));var s=new egret.TextField;s.width=t.faq_scroller.width,s.touchEnabled=!0,s.wordWrap=!0,s.size=26,s.textFlow=new(Array.bind.apply(Array,[void 0].concat(a)));var r=new eui.Image;r.width=30,r.height=30,r.source="game_res_json.bt_subtract",r.touchEnabled=!0,t.faq_scroller_group.addChild(o),t.faq_scroller_group.addChild(s),t.faq_scroller_group.addChild(r),t.img_list.push(r),t.question_list.push(o),t.answer_list.push(s),s.visible=!1,o.visible=!0,r.name=n,r.visible=!0,t.calculatedOffset()})},e.prototype.calculatedOffset=function(t){var e=this;void 0===t&&(t=0);var n=120;this.answer_list.forEach(function(i,a){a===t?(i.visible=!0,n+=i.height):i.visible=!1;for(var o=0,s=0;a>s;s++)e.answer_list[s].visible&&(o+=e.answer_list[s].height+10);for(var s=0;a>=s;s++)o+=e.question_list[s].height+10;i.y=o}),this.img_list.forEach(function(n,i){i===t?n.source="game_res_json.bt_add":n.source="game_res_json.bt_subtract";for(var a=0,o=0;i>o;o++)a+=e.question_list[o].height+10,e.answer_list[o].visible&&(a+=e.answer_list[o].height+10);n.y=a}),this.question_list.forEach(function(i,a){a===t?(i.textFlow=new Array({text:"-   "+i.text.split(/\+ +|\- +/)[1],style:{href:"event:"+a}}),n+=i.height):(i.textFlow=new Array({text:"+  "+i.text.split(/\+ +|\- +/)[1],style:{href:"event:"+a}}),n+=i.height);for(var o=0,s=0;a>s;s++)o+=e.question_list[s].height+10,e.answer_list[s].visible&&(o+=e.answer_list[s].height+10);i.y=o}),this.faq_scroller_group.height=n,this.faq_scroller.viewport.scrollV=0},e}(BoardCore);__reflect(BoardFAQ.prototype,"BoardFAQ");var BoardFinal=function(t){function e(){var e=t.call(this,!1)||this;return DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Lang.GetLangType()==LangType.Chinese?this.txtYourInfo.font="cn_fat_white_fnt":Lang.GetLangType()==LangType.Korean?this.txtYourInfo.font="kr_fat_white_fnt":this.txtYourInfo.font="en_fat_white_fnt",this.btClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.finalTalk=new FinalTalk,this.scrollerTalk.viewport=this.finalTalk,this.reset(),this.createBg(this)},e.prototype.onShow=function(){this.finalTalk.setText("")},e.prototype.fadeIn=function(){this.createBlurBg(),t.prototype.fadeIn.call(this)},e.prototype.reset=function(){this.visible=!0,this.update(),this.countdown=Cf.One().config.timeBoardClose,this.countdownUpdate();var t=Cf.One().gameData.seqGetId[0],e=Cf.One().gameData.seqGetId[1],n=EOSSystem.One().getWinInfo();if(n){var i=n.winamount_num-n.betamount_num;i>0?this.txtYourInfo.text=Cf.One().f1(Lang.Val(LangKey.str_win),""+Math.abs(i)):this.txtYourInfo.text=Cf.One().f1(Lang.Val(LangKey.str_lose),""+Math.abs(i))}else this.txtYourInfo.text=Lang.Val(LangKey.str_playNextRound);this.txt1sd.text=""+Cf.One().dicPlayerInfoById[t].name,this.txt2nd.text=""+Cf.One().dicPlayerInfoById[e].name,this.txt1.text=""+Cf.One().dicPlayerInfoById[t].desId,this.txt2.text=""+Cf.One().dicPlayerInfoById[e].desId,this.finalTalk.setText(Cf.One().gameData.auctionInfo.slogan)},e.prototype.countdownUpdate=function(){var t=this;return this.txtCountdown.text=Math.round(this.countdown)+"s",this.countdown<=0?void this.onTap():void egret.Tween.get(this).wait(1e3).call(function(){t.countdown-=1,t.countdownUpdate()})},e.prototype.countdownStop=function(){egret.Tween.removeTweens(this)},e.prototype.update=function(){this.playerFirst||(this.playerFirst=new AnimalIdel,this.playerFirst.isAnimatePlayOnce=!0,this.playerFirst.scaleX=this.playerFirst.scaleY=2,this.potFirst.addChild(this.playerFirst)),this.playerFirst.id=PlayerIdleId["player"+Cf.One().gameData.seqGetId[0]],this.playerFirst.updateId(),this.playerFirst.setStatus(AnimalStatus.game_win,!1),this.playerSecond||(this.playerSecond=new AnimalIdel,this.playerSecond.isAnimatePlayOnce=!0,this.playerSecond.scaleX=this.playerSecond.scaleY=1.6,this.potSecond.addChild(this.playerSecond)),this.playerSecond.id=PlayerIdleId["player"+Cf.One().gameData.seqGetId[1]],this.playerSecond.updateId(),this.playerSecond.setStatus(Math.floor(Math.random()*(AnimalStatus.idleRandom-AnimalStatus.idle1)+AnimalStatus.idle1),!1)},e.prototype.onTap=function(){this.visible=!1,this.countdownStop(),SceneCore.GotoScene(SceneType.Game_Bet)},e}(BoardCore);__reflect(BoardFinal.prototype,"BoardFinal");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.poolLoadingBar=[],e.poolId=0,e.once(egret.Event.ADDED_TO_STAGE,e.createView,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(e,t),e.prototype.onRemoved=function(){for(var t=0;t<this.poolLoadingBar.length;t++){var e=this.poolLoadingBar[t];OBJManager.DestroyShape(e)}},e.prototype.createView=function(){var t={width:300,height:50};this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=(this.stage.stageHeight-t.height)/2,this.textField.x=(this.stage.stageWidth-t.width)/2,this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,this.textField.width=t.width,this.textField.height=t.height;for(var e={x:this.stage.stageWidth/2,y:this.stage.stageHeight/2-50},n=12,i=2*Math.PI/n,a=30,o=0;n>o;o++){var s=i*o,r={x:e.x+Math.cos(s)*a,y:e.y+Math.sin(s)*a},h=OBJManager.CreateShape();this.addChild(h),this.poolLoadingBar.push(h),h.graphics.beginFill(16777215),h.graphics.drawCircle(r.x,r.y,5),h.graphics.endFill(),h.alpha=0}this.nakamoto=new Component.Nakamoto,this.nakamoto.scaleX=.6,this.nakamoto.scaleY=.6,this.nakamoto.x=(this.stage.stageWidth-.6*this.nakamoto.width)/2,this.nakamoto.y=(this.stage.stageHeight-.6*this.nakamoto.height-230)/2,this.addChild(this.nakamoto)},e.prototype.loopLoadingBar=function(){var t=this;egret.Tween.get(this.poolLoadingBar[this.poolId]).to({alpha:1},100).call(function(e){t.poolId++,t.poolId>t.poolLoadingBar.length-1&&(t.poolId=0),t.loopLoadingBar()},this).to({alpha:0},500)},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+Math.round(t/(e+1)*100)+"%"},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BoardTalk=function(t){function e(){var e=t.call(this)||this;return e.poolTalks=[],e.potNextPot=0,e.skinName="resource/eui_skins/BoardTalk.exml",e.grpHistorySeq=new Layer_HistoryList,e.grpHistorySeq.visible=!1,e.addNotify(),e}return __extends(e,t),e.prototype.addNotify=function(){Notify.One().add(NotifyName.game_update_seq,this.onNotify,this),Notify.One().add(NotifyName.game_update_history,this.onNotify,this),Notify.One().add(NotifyName.talk_notify,this.onNotify,this),TalkingSystem.One()},e.prototype.loadData=function(){var t=this;EOSSystem.One().getWinHistory().then(function(e){DLOG("Reset history data",e),t.grpHistorySeq.reset(e)})["catch"](function(t){DWARN("Reload history")})},e.prototype.reset=function(){this.loadData()},e.prototype.moveBottom=function(t){this.grpAll.bottom=t},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.txtInput.enabled=!0,this.txtInput.textColor=16777215,this.btPost.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.txtTitle_chatroom.text=Lang.Val(LangKey.str_chatroom),this.txtTitle_statistics.text=Lang.Val(LangKey.str_statistics),this.talkList=new TalkList,this.talkList.setListSize(325,0),this.scrollTalkList.viewport=this.talkList,this.txtInput.maxChars=110},e.prototype.changeRightView=function(t){switch(t){case TalkRightViewType.History:this.grpSeq.visible=!1,this.grpHistorySeq.visible=!0,this.scrollRight.viewport=this.grpHistorySeq,this.grpHistorySeq.x=0,this.grpHistorySeq.y=0;break;case TalkRightViewType.Seq:default:this.grpHistorySeq.visible=!1,this.grpSeq.visible=!0,this.scrollRight.viewport=this.grpSeq,this.grpSeq.x=0,this.grpSeq.y=0,this.grpSeq.width=this.scrollRight.width-5,this.grpSeq.height=this.scrollRight.height-5}},e.prototype.jumpToBottom=function(){egret.Tween.removeTweens(this.scrollTalkList.viewport),this.potNextPot=this.talkList.getListSize().height-80,this.scrollTalkList.viewport.scrollV=this.potNextPot},e.prototype.fadeToBottom=function(){egret.Tween.removeTweens(this.scrollTalkList.viewport);var t=this.talkList.getListSize().height-80;this.potNextPot>t?this.scrollTalkList.viewport.scrollV=t-40:this.scrollTalkList.viewport.scrollV=this.potNextPot,egret.Tween.get(this.scrollTalkList.viewport).to({scrollV:t},300,egret.Ease.cubicInOut),this.potNextPot=this.talkList.getListSize().height-80},e.prototype.onClick=function(){return EOSSystem.One().isHasScatterAccount?(this.txtInput.text.length>0&&TalkingSystem.One().sendMessage(this.txtInput.text)&&(this.txtInput.text=""),void Cf.One().backFullSpaceFromKeyboard()):void Cf.One().showTip(Lang.Val(LangKey.tip_noLogin))},e.prototype.onNotify=function(t){if(t.name==NotifyName.game_update_seq){var e=t.userdata;this.mcIconSeq1&&(this.mcIconSeq1.updateDisplay(e[0]),this.mcIconSeq2.updateDisplay(e[1]))}else if(t.name==NotifyName.talk_notify){var n=t.userdata;switch(n.type){case TalkingType.bet:var i=n;if(!TalkingSystem.CheckVersion(i.data.version,i.serverVersion))return;var a=i.data.amount,o=this.formatMemo(i.data.username,a);this.talkList.addMsg(o),this.fadeToBottom();break;case TalkingType.update:var s=n;if(!TalkingSystem.CheckVersion(s.data.version,s.serverVersion))return;s.data.msg?o=s.data.username+":"+s.data.msg:s&&(o=s.data.username+":"+s.data),o&&(this.talkList.addMsg(o),this.fadeToBottom());break;case TalkingType.history:for(var r=n,h=0;h<r.data.length;h++){var l=r.data[h];if(TalkingSystem.CheckVersion(l.version,r.serverVersion))switch(l.type){case TalkingType.bet:o=this.formatMemo(l.username,l.data),this.talkList.addMsg(o);break;case TalkingType.history:default:o=l.username+":"+l.data,this.talkList.addMsg(o)}}this.jumpToBottom();break;case TalkingType.offline:if(DEBUG1(DM1.talkNoticeOffline)){var c=n;if(!TalkingSystem.CheckVersion(c.data.version,c.serverVersion))return;o=c.data.username+" offline",this.talkList.addMsg(o),this.fadeToBottom()}}}else t.name==NotifyName.game_update_history&&(this.mcIconSeq1&&this.mcIconSeq1.resetDisplay(Cf.One().gameData.won1stIdsSeq),this.mcIconSeq2&&this.mcIconSeq2.resetDisplay(Cf.One().gameData.won2ndIdsSeq))},e.prototype.updateParent=function(t){this.parent!=t&&(this.parent&&this.parent.removeChild(this),t.addChild(this)),this.reset()},e.prototype.formatMemo=function(t,e){var n="➀➁➂➃➄➅➆➇",i=e.split("|"),a=[];if(4==i.length){for(var o=i[2].split(","),s=0;s<o.length;s++){var r=o[s].split(":");2==r.length&&(r[0].length>1?a.push(r[1]+" EOS on "+n[parseInt(r[0][0])-1]+n[parseInt(r[0][1])-1]):a.push(r[1]+" EOS on "+n[parseInt(r[0])-1]))}o=i[3].split(",");for(var s=0;s<o.length;s++){var r=o[s].split(":");2==r.length&&(r[0].length>1?a.push(r[1]+" EOS on "+n[parseInt(r[0][0])-1]+n[parseInt(r[0][1])-1]):a.push(r[1]+" EOS on "+n[parseInt(r[0])-1]))}}return t+" just placed "+a.join(",")},e.One=function(){return this.__one||(this.__one=new e),this.__one},e}(eui.Component);__reflect(BoardTalk.prototype,"BoardTalk",["eui.UIComponent","egret.DisplayObject"]);var BoardTip=function(t){function e(){var e=t.call(this)||this;return DLOG(""),DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e.visible=!1,Notify.One().add(NotifyName.system_notify,e.onNotify,e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){egret.Tween.get(e).to({y:e.pot.y-100},500,egret.Ease.backIn).call(function(){e.visible=!1},e)},e),e}return __extends(e,t),e.prototype.onNotify=function(t){if(t.name==NotifyName.system_notify){var e=t.userdata.msg;if(!e)return;this.showTip(e)}},e.prototype.showTip=function(t){var e=this;this.txtTip.text=t,egret.Tween.removeTweens(this),this.visible=!0,this.y=this.pot.y-100,egret.Tween.get(this).to({y:this.pot.y},500,egret.Ease.backOut).wait(1800).to({y:this.pot.y-100},500,egret.Ease.backIn).call(function(){e.visible=!1},this)},e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.grpTip.touchEnabled=!1,this.txtTip.touchEnabled=!1,this.bg.touchEnabled=!1,this.pot={x:this.x,y:this.y},this.txtTip.text=""},e.One=function(){return this.__one||(this.__one=new e),this.__one},e}(eui.Component);__reflect(BoardTip.prototype,"BoardTip",["eui.UIComponent","egret.DisplayObject"]);var BoardWaiting=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.fadeIn=function(){this.visible=!0,this.createBlurBg(),t.prototype.fadeIn.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.txtLoading&&(Lang.GetLangType()==LangType.Chinese?this.txtLoading.font="cn_fat_white_fnt":Lang.GetLangType()==LangType.Korean?this.txtLoading.font="kr_fat_white_fnt":this.txtLoading.font="en_fat_white_fnt",this.txtLoading.text=Lang.Val(LangKey.tip_waiting))},e}(BoardCore);__reflect(BoardWaiting.prototype,"BoardWaiting");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var BoardCommon=function(t){function e(){var e=t.call(this)||this;return DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e}return __extends(e,t),e.prototype.fadeIn=function(){t.prototype.fadeIn.call(this),this.visible=!0},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.bt_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.createBg()},e.prototype.onTap=function(){this.visible=!1},e}(BoardCore);__reflect(BoardCommon.prototype,"BoardCommon");var st_config;!function(t){function e(){return Cf.One().stageSize.width}function n(){return Cf.One().stageSize.height}function i(t){t.left=0,t.right=0,t.top=0,t.bottom=0}t.curWidth=e,t.curHidth=n,t.setScreenAuto=i}(st_config||(st_config={}));var Component;!function(t){var e=function(t){function e(){var e=t.call(this)||this,n=new egret.MovieClipDataFactory(RES.getRes("nakamoto_run_json"),RES.getRes("nakamoto_run_png"));return e.movieClipData=n.generateMovieClipData("run"),e.addEventListener(egret.Event.COMPLETE,function(){this.run()},e),e.run(),e}return __extends(e,t),e.prototype.run=function(){this.gotoAndPlay("run",-1)},e}(egret.MovieClip);t.Nakamoto=e,__reflect(e.prototype,"Component.Nakamoto")}(Component||(Component={}));var AnalyticsSystem=function(){function t(){}return t.prototype.platfom=function(t){switch(t){case PlatfomType.mobile:this.event("platfom",{type:"mobile"});break;case PlatfomType.pc:this.event("platfom",{type:"pc"});break;default:this.event("platfom",{type:"others"})}},t.prototype.gameId=function(t){this.event("gameId",{gameId:String(t)})},t.prototype.scene=function(t){switch(t){case SceneType.Game_Bet:this.event("scene",{sceneName:"bet"});break;case SceneType.Game_Running:this.event("scene",{sceneName:"game_running"});break;default:this.event("scene",{sceneName:"others"})}},t.prototype.btnPress=function(t){switch(t){case ButtonType.go:this.event("button",{buttonName:"go"});break;case ButtonType.reset:this.event("button",{buttonName:"reset"});break;case ButtonType.bet1Selected:this.event("button",{buttonName:"bet1"});break;case ButtonType.bet5Selected:this.event("button",{buttonName:"bet5"});break;case ButtonType.bet20Selected:this.event("button",{buttonName:"bet20"});break;case ButtonType.betSel1st:this.event("button",{buttonName:"betSel 1st"});break;case ButtonType.betSel1st2nd:this.event("button",{buttonName:"betSel 1st and 2nd"});break;default:this.event("button",{sceneName:"others"})}},t.prototype.betSel=function(t){this.event("betSel",{value:t})},t.prototype.event=function(t,e){this.gtag("event",t,e)},t.prototype.set=function(t,e){this.gtag("set",t,e)},t.prototype.config=function(t,e){this.gtag("config",t,e)},t.prototype.gtag=function(t,e,n){window&&(n?window.gtag(t,e,n):window.gtag(t,e))},t.One=function(){return this.__one||(this.__one=new t),this.__one},t}();__reflect(AnalyticsSystem.prototype,"AnalyticsSystem");var wssTokenStatus=!1,EOSSystem=function(t){function e(){var e=t.call(this)||this;e.isLogin=!1,e.isHasScatterAccount=!0,e.data_winInfo4GameId={},e.data_winInfo4CurrentGameId={},e.config={gameId:-1},e.paramBit={game:"game",gameId:-1,money:0,coin:0,bets1:{},bets2:{}},e.paramPoster={recipient:null},e.paramGetter={json:!0,code:null,scope:null,table:null,limit:200},DEBUG1(DM1.isEOSPublish)?(e.httpEndpoint="https://geo.eosasia.one",e.wssServer="mainnet.eos.dfuse.io",e.chainId="aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"):(e.httpEndpoint="https://jungle.eoscanada.com",e.wssServer="jungle.eos.dfuse.io",e.chainId="e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473"),e.wssToken="",e.refreshWssToken(),e.httpPort=443,e.gameName="nakamotorun2",e.EosCode="eosio.token",e.CoinCode="nakamotorun1",e.Dividend="nakamotorun4",e.wssOption_gameResult={listen:!0,type:"get_action_traces",req_id:"bonus_result",data:{account:"nakamotorun3",action_name:"gameresult",receiver:"nakamotorun3"}},e.wssOption_bonusUserList={listen:!0,type:"get_action_traces",req_id:"bonus_users_list",data:{account:"nakamotorun3",action_name:"result",receiver:"nakamotorun3"}},e.socket=new egret.WebSocket,e.socket.addEventListener(egret.Event.CONNECT,function(){e.socket.writeUTF(JSON.stringify(e.wssOption_gameResult)),e.socket.flush(),e.socket.writeUTF(JSON.stringify(e.wssOption_bonusUserList)),e.socket.flush()},e),e.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,e.onSocketReceiveMessage,e),e.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){DERR("onSocketError",t)},e);var n=setInterval(function(){e.wssToken?(clearInterval(n),e.socket.connectByUrl("wss://"+e.wssServer+"/v1/stream?token="+e.wssToken)):console.log("pending get token")});return e.initEosApi(),e}return __extends(e,t),e.prototype.getWinInfo=function(t){if(!this.data_winInfo4CurrentGameId)return DLOG("self data result info",null),null;this.data_gameInfo&&(t=t||this.getAccountName());var e=this.data_winInfo4CurrentGameId[t];return DLOG("self data result",e),e},e.prototype.getWssToken=function(){var t=this;return new Promise(function(e,n){Ajax.HttpsConnect.post("https://auth.dfuse.io/v1/auth/issue",{api_key:"web_e96e484880bef55a362b69bbbfe7f8dc"},function(t){var i=JSON.parse(t.response);return i?e(i):n()},t)})},e.prototype.refreshWssToken=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,n,i,n;return __generator(this,function(a){switch(a.label){case 0:t=egret.localStorage.getItem("wssToken"),a.label=1;case 1:return a.trys.push([1,8,,10]),t?(t=JSON.parse(t),e=Math.floor((new Date).getTime()/1e3)+1800,console.log(t.expires_at,e),t.expires_at>e?(this.wssToken=t.token,[3,4]):[3,2]):[3,5];case 2:return[4,this.getWssToken()];case 3:n=a.sent(),egret.localStorage.setItem("wssToken",JSON.stringify(n)),this.wssToken=n.token,a.label=4;case 4:return[3,7];case 5:return[4,this.getWssToken()];case 6:n=a.sent(),egret.localStorage.setItem("wssToken",JSON.stringify(n)),this.wssToken=n.token,a.label=7;case 7:return[3,10];case 8:return i=a.sent(),console.error(i),[4,this.getWssToken()];case 9:return n=a.sent(),egret.localStorage.setItem("wssToken",JSON.stringify(n)),this.wssToken=n.token,[3,10];case 10:return[2]}})})},e.prototype.getWinHistory=function(){var t=this;return new Promise(function(n,i){e.One().getGameInfo().then(function(e){var a=e.rows[0].game_id;t.paramGetter.code="nakamotorun2",t.paramGetter.scope="nakamotorun2",t.paramGetter.table="gameresult",t.eosApi.getTableRows(t.paramGetter).then(function(t){for(var e=t.rows[0].results,i=0;i<e.length;i++){var o=e[i];if(o.game_id==a){e.splice(i,1);break}}n(t)})["catch"](function(t){i(t)})})["catch"](function(t){i(t)})})},e.prototype.getLimitPoolBets=function(t){if(!this.data_gameInfo)return 99999999;var n=e.MoneyFromStr(this.data_gameInfo.rows[0].maxwinpool)-e.MoneyFromStr(this.data_gameInfo.rows[0].winpool);return n-t.bet1Maxnum*e.config.bet1Mult-t.bet2Maxnum*e.config.bet2Mult},e.prototype.fakeLoginWithoutScatter=function(){this.isHasScatterAccount=!1},e.prototype.onSocketReceiveMessage=function(){var t=JSON.parse(this.socket.readUTF());if(t)if("bonus_result"===t.req_id&&"action_trace"===t.type){this.data_winInfoCurrentId=-1,this.data_winInfo4CurrentGameId={},DLOG("wss win result",t);var n=t;n.data&&n.data.trace&&n.data.trace.act&&n.data.trace.act.data&&n.data.trace.act.data.result&&n.data.trace.act.data.result.result&&Notify.One().post(NotifyName.eos_result_update,{game_id:n.data.trace.act.data.result.game_id,result:n.data.trace.act.data.result.result})}else if("bonus_users_list"===t.req_id&&"action_trace"===t.type){DLOG("wss win users list",t);var n=t,i=n.data.trace.act.data.result;i.game_id in this.data_winInfo4GameId||(this.data_winInfo4GameId[i.game_id]=[]),this.data_winInfo4GameId[i.game_id].push({bet:i.bet,betamount:i.betamount,bettime:i.bettime,game_id:i.game_id,player:i.player,winamount:i.winamount,betamount_num:e.MoneyFromStr(i.betamount),winamount_num:e.MoneyFromStr(i.winamount)}),this.data_winInfoCurrentId=i.game_id,this.data_winInfo4CurrentGameId[i.player]={bet:i.bet,betamount:i.betamount,bettime:i.bettime,game_id:i.game_id,player:i.player,winamount:i.winamount,betamount_num:e.MoneyFromStr(i.betamount),winamount_num:e.MoneyFromStr(i.winamount)}}},e.prototype.loginPlus=function(){var e=this;return new Promise(function(n,i){t.prototype.login.call(e,function(){e.isLogin=!0,e.isHasScatterAccount=!0,n()},function(t){e.isHasScatterAccount=!1,i(t)})})},e.prototype.setBet=function(t){var n=this;if(!this.isHasScatterAccount)return Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()});this.config.gameId=t.gameId,this.paramBit.gameId=t.gameId,this.paramBit.bets1=t.bets1,this.paramBit.bets2=t.bets2;var i=[this.paramBit.game,this.paramBit.gameId,this.betObj2Str(this.paramBit.bets1,","),this.betObj2Str(this.paramBit.bets2,",")].join("|");return this.paramPoster.recipient=this.EosCode,this.paramPoster.method="transfer",this.paramPoster.data={from:this.getAccountName(),to:this.gameName,quantity:e.MoneyToStr(t.money),memo:i},this.log(this.paramPoster),new Promise(function(t,e){n.setCustomMethod(n.paramPoster,function(e){t(e)},function(t){e(t)})})},e.prototype.setGetToken=function(){var t=this;return this.isHasScatterAccount?(this.paramPoster.recipient=this.gameName,this.paramPoster.method="claim",this.paramPoster.data={from:this.getAccountName()},new Promise(function(e,n){t.setCustomMethod(t.paramPoster,function(t){e(t)},function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.getAccountNamePlus=function(){var t=this;return new Promise(function(e,n){if(!t.isHasScatterAccount)return Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),void n(null);var i=t.getAccountName();i?e(i):t.open(function(a){i=t.getAccountName(),i?e(i):n(null)},function(t){n(null)})})},e.prototype.getGameInfo=function(){var t=this;return this.paramGetter.code=this.gameName,this.paramGetter.scope=this.gameName,this.paramGetter.table="global",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(n){t.data_gameInfo=n,e(n),Cf.One().checkOverTheWinPool()})["catch"](function(t){n(t)})})},e.prototype.getAuctionAd=function(){var t=this;return this.paramGetter.code=this.gameName,this.paramGetter.scope=this.gameName,this.paramGetter.table="auction",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.modifyAdWord=function(t){var e=this;return this.isHasScatterAccount?(this.paramPoster.recipient="nakamotorun2",this.paramPoster.method="setslogan",this.paramPoster.data={from:this.getAccountName(),slogan:t.adWord},new Promise(function(t,n){e.setCustomMethod(e.paramPoster,function(e){t(e)},function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.setAuctionAd=function(t){var n=this;if(!this.isHasScatterAccount)return Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()});return this.paramPoster.recipient=this.CoinCode,this.paramPoster.method="transfer",this.paramPoster.data={from:this.getAccountName(),to:"nakamotorun2",quantity:e.MoneyToStr(t.money,e.MoneyUnit_RUN),memo:"auction"},new Promise(function(t,e){n.setCustomMethod(n.paramPoster,function(e){t(e)},function(t){e(t)})})},e.prototype.getGlobalCost=function(){var t=this;return this.paramGetter.code=this.gameName,this.paramGetter.scope=this.gameName,this.paramGetter.table="token",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.getSelfEosCost=function(){var t=this;return this.paramGetter.code=this.gameName,this.paramGetter.scope=this.getAccountName(),this.paramGetter.table="accounts",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.getGameBetInfo=function(t){var e=this;return this.paramGetter.code=this.gameName,this.paramGetter.scope=String(t),this.paramGetter.table="betaccounts",new Promise(function(t,n){e.eosApi.getTableRows(e.paramGetter).then(function(e){t(e)})["catch"](function(t){n(t)})})},e.prototype.getMoney=function(){var t=this;return this.paramGetter.code=this.EosCode,this.paramGetter.scope=this.getAccountName(),this.paramGetter.table="accounts",new Promise(function(e,n){return t.isHasScatterAccount?void t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)}):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),void n("don't has scatter"))})},e.prototype.getCoin=function(){var t=this;return this.isHasScatterAccount?(this.paramGetter.code=this.CoinCode,this.paramGetter.scope=this.getAccountName(),this.paramGetter.table="accounts",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.getGlobalTransfer=function(){var t=this;return this.paramGetter.code=this.Dividend,this.paramGetter.scope=this.Dividend,this.paramGetter.table="global",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.getSelfTransfer=function(){var t=this;return this.paramGetter.code=this.Dividend,this.paramGetter.scope=this.getAccountName(),this.paramGetter.table="voters",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.getSystemMoney=function(){var t=this;return this.paramGetter.code=this.EosCode,this.paramGetter.scope="nakamotorun5",this.paramGetter.table="accounts",new Promise(function(e,n){t.eosApi.getTableRows(t.paramGetter).then(function(t){e(t)})["catch"](function(t){n(t)})})},e.prototype.stakeAction=function(t){var e=this;return this.isHasScatterAccount?(this.paramPoster.recipient=this.CoinCode,this.paramPoster.method="transfer",this.paramPoster.data={from:this.getAccountName(),to:this.Dividend,quantity:t.amount,memo:t.action},new Promise(function(t,n){e.setCustomMethod(e.paramPoster,function(e){t(e)},function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.unStakeAction=function(t){var e=this;return this.isHasScatterAccount?(this.paramPoster.recipient=this.Dividend,this.paramPoster.method="unstake",this.paramPoster.data={from:this.getAccountName(),quantity:t.amount},new Promise(function(t,n){e.setCustomMethod(e.paramPoster,function(e){t(e)},function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.claimAction=function(){var t=this;return this.isHasScatterAccount?(this.paramPoster.recipient=this.Dividend,this.paramPoster.method="claim",this.paramPoster.data={from:this.getAccountName()},new Promise(function(e,n){t.setCustomMethod(t.paramPoster,function(t){e(t)},function(t){n(t)})})):(Cf.One().showTip(Lang.Val(LangKey.tip_noLogin)),new Promise(function(t,e){e()}))},e.prototype.debugFilterData=function(t){var e;t.rows.some(function(t,n,i){return t.balance.indexOf(" EOS")?(e=t,!0):!1}),DLOG(e)},e.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];DLOG.apply(this,t)},e.prototype.err=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];DWARN.apply(this,t)},e.prototype.betObj2Str=function(t,e){var n="";for(var i in t)n+=i+":"+t[i]+e;return 0!=n.length&&(n=n.substring(0,n.length-e.length)),n},e.MoneyToStr=function(t,e,n){return void 0===n&&(n=4),t.toFixed(n)+" "+(e||this.MoneyUnit_EOS)
},e.MoneyFromStr=function(t){return parseFloat(t)},e.One=function(){return this.__one||(this.__one=new e),this.__one},e.MoneyUnit_EOS="EOS",e.MoneyUnit_RUN="RUN",e.config={bet1Mult:7,bet2Mult:25},e}(EOSPlus);__reflect(EOSSystem.prototype,"EOSSystem");var Ajax;!function(t){var e=function(){function t(){}return t.post=function(t,e,n,i){var a=JSON.stringify(e),o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,DLOG("post url::",t),o.open(t,egret.HttpMethod.POST),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(a),o.addEventListener(egret.Event.COMPLETE,function(e){DLOG("response post",t);var a=e.currentTarget;n.call(i,a)},this),o},t.get=function(t,e,n,i){var a=e,o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,DLOG("get url::",t),o.open(t,egret.HttpMethod.GET),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(a),o.addEventListener(egret.Event.COMPLETE,function(e){var a=e.currentTarget;DLOG("response get",t),n.call(i,a)},this),o},t}();t.HttpsConnect=e,__reflect(e.prototype,"Ajax.HttpsConnect")}(Ajax||(Ajax={}));var TalkingSystem=function(){function t(){var e=this;if(this.isNameSetuped=!1,!DEBUG1(DM1.talkSystem))return void DERR("TalkingSystem Forbid!!");DEBUG2(DM2.demoTalkingServer)&&(Cf.One().config.talkingServer="http://192.168.1.116:3101/"),DLOG("talking server ",Cf.One().config.talkingServer),this.socket=io.connect(Cf.One().config.talkingServer),this.socket.on("notify",function(n){if(!DEBUG1(DM1.talkExit)&&n.type==TalkingType.offline)return void(e.isNameSetuped=!1);if(DEBUG1(DM1.talkHistory)||n.type!=TalkingType.history){if(n.type==TalkingType.bet);else if(n.type==TalkingType.setup)return DEBUG1(DM1.talkRandomName)?void 0:EOSSystem.One().isHasScatterAccount?void EOSSystem.One().getAccountNamePlus().then(function(n){e.socket.emit("setup",n,t.version),e.isNameSetuped=!0})["catch"](function(t){e.isNameSetuped=!1}):void(e.isNameSetuped=!1);Notify.One().post(NotifyName.talk_notify,n)}}),this.socket.emit("history")}return t.prototype.test=function(){var t="aksdfaksjvoisdutwekmnvz,mc3492354987sadkjvnsa;df",e=Cf.One().ranD(t.length-5),n=Cf.One().ranD(t.length,e);this.sendMessage(t.substring(e,n))},t.prototype.sendBet=function(t){return this.isNameSetuped?(this.socket.emit("bet",t),!1):!1},t.prototype.sendMessage=function(t){return this.isNameSetuped?(this.socket.emit("message",t),!0):!1},t.CheckVersion=function(e,n){return e&&t.version?e&&t.version<e?(DWARN("New Msg Need Update Client",e,t.version,n),!1):!0:(DWARN("New Msg Need Update Client",e,t.version,n),!1)},t.One=function(){return this.__one||(this.__one=new t),this.__one},t.version=2,t}();__reflect(TalkingSystem.prototype,"TalkingSystem");var Scene_Bets=function(t){function e(){var e=t.call(this)||this;return e.poolGrpStand=[],e.poolGrpWin=[],e.poolGrpFront=[],e.dicBitNext={},e.isBtnEnable=!0,e.status=BetStatus.NONE,DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e.layer_coins=new egret.DisplayObjectContainer,e.layerMajor.addChild(e.layer_coins),e.boardRunnerInfo=new BoardRunnerInfo,e.boardRunnerInfo.visible=!1,e.layerBoard.addChild(e.boardRunnerInfo),e.timer4UpdateCountdown=new egret.Timer(1e3*Cf.One().config.timeUpdateInfo,0),e.timer4UpdateCountdown.addEventListener(egret.TimerEvent.TIMER,e.onUpdateTimer,e),e.timer4UpdateCountdown.start(),e}return __extends(e,t),e.prototype.debugMe=function(){for(var t=Math.floor(Math.random()*(AnimalStatus.idleRandom-AnimalStatus.idle1)),e={},n=0;;){t++;var i=Math.floor(t%6+AnimalStatus.idle1);if(null==e[i]?e[i]=1:e[i]++,n++>1e3)break}DLOG(e)},e.prototype.onShow=function(){t.prototype.onShow.call(this),Cf.One().reset(),SoundManager.One().play(SoundName.tag_bgm_bets,!1),Notify.One().add(NotifyName.system_gotoBackground,this.onNotify,this),Notify.One().add(NotifyName.eos_result_update,this.onNotify,this),this.status=BetStatus.NONE;for(var e in this.dicBitNext)this.dicBitNext[e].visible=!1;this.enableBtnOperate(!0,!1),this.boardTalk=BoardTalk.One(),this.boardTalk.updateParent(this.grpTalk),this.boardTalk.changeRightView(TalkRightViewType.History),this.boardRunnerInfo&&this.boardRunnerInfo.hide(),this.reset(),this.recoverBetData(),egret.Tween.get(this).wait(500).call(this.recoverBetData,this),egret.Tween.get(this).wait(1e3).call(this.recoverBetData,this),egret.Tween.get(this).wait(2e3).call(this.recoverBetData,this)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.drawBg(),DEBUG1(DM1.displayTopMenu)||(this.grpTopMenu.visible=!1),this.boardTalk&&this.boardTalk.reset(),this.focus1.alpha=0,this.focus5.alpha=0,this.focus20.alpha=0,this.focus1.touchEnabled=!1,this.focus5.touchEnabled=!1,this.focus20.touchEnabled=!1,this.bt_start.alpha=Cf.One().config.btDisableAlpha;for(var n=function(t){var n="grpWin"+(t+1),a=i[n];a?(a.ids=[t],a.alpha=0,i.poolGrpWin.push(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onTap,i)):DWARN(n+" is not set in exml"),n="grpRunner"+(t+1);var o=i[n];if(o){var s=new AnimalIdel;s.id=PlayerIdleId["player"+t],s.updateId(),s.x=o.$anchorOffsetX,s.y=o.$anchorOffsetY,o.addChild(s),o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.boardRunnerInfo.fadeIn(),e.boardRunnerInfo.updateId(t)},i),i.poolGrpStand.push(o)}else DWARN(n+" is not set in exml")},i=this,a=0;8>a;a++)n(a);for(var a=0;7>a;a++)for(var o=a+1;8>o;o++){var s="grpFront"+(a+1)+"_"+(o+1),r=this[s];r?(r.ids=[a,o],r.alpha=0,this.poolGrpFront.push(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)):DWARN(s+" is not set in exml")}this.updateCoinInfo(),this.bt_bit1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bt_bit5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bt_bit20.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bt_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btBitReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.updateGameId=function(t){Cf.One().gameData.game_id!=t&&(Cf.One().gameData.game_id=t,DLOG("current id",t),AnalyticsSystem.One().gameId(t))},e.prototype.recoverBetData=function(){var t=this;this.status&BetStatus.refreshHistoryData||this.betTargets&&EOSSystem.One().getGameInfo().then(function(e){t.status&BetStatus.refreshHistoryData||(t.updateGameId(e.rows[0].game_id),EOSSystem.One().getGameBetInfo(e.rows[0].game_id).then(function(e){if(!(t.status&BetStatus.refreshHistoryData)&&e&&0!=e.rows.length){var n=EOSSystem.One().getAccountName();if(n){for(var i,a,o=0;o<e.rows.length;o++){var s=e.rows[o];if(s.player==n){i=EOSSystem.MoneyFromStr(s.betamount),a=s.bet;break}}a&&i&&t.analysisBetData(a),t.status|=BetStatus.refreshHistoryData}}})["catch"](function(t){}))})["catch"](function(t){})},e.prototype.analysisBetData=function(t){for(var e=t.split("|"),n=e.length-1;n>=0;n--)""==e[n]&&e.splice(n,1);for(var i=[],n=0;n<e.length;n++)i=i.concat(e[n].split(","));if(0!=i.length){for(var n=0;n<i.length;n++){var a=i[n],o=a.split(":");if(2==o.length){var s=o[0],r=parseInt(o[1]);this.jumpCoin(s,r)}}this.status|=BetStatus.hasBeted,this.enableBtnOperate(!1,!1)}},e.prototype.reset=function(){Cf.One().resetBets(),this.bt_start.alpha=Cf.One().config.btDisableAlpha;var t=function(t){var n=e.dicBitNext[t],i=null;if(Cf.One().dicBitsCountSaved[t]&&Cf.One().dicBitsCountSaved[t]>0){var a=n.getCount()-Cf.One().dicBitsCountSaved[t];n.setCount(Cf.One().dicBitsCountSaved[t]),a>0&&(i=OBJManager.createNode(Unit_Bit,ObjManagerType.Unit_Bit),n.parent.addChild(i),i.x=n.x,i.y=n.y,i.scaleX=i.scaleY=n.scaleX,i.setCount(a)),n=i}else delete e.dicBitNext[t];n&&egret.Tween.get(n).wait(200*Math.random()).to({y:n.y-10,alpha:0},400).call(function(){OBJManager.DestroyNode(n)},e)},e=this;for(var n in this.dicBitNext)t(n);this.updateCoinInfo(),DEBUG1(DM1.goBtnForStart)?(Cf.One().gameData.countdown=13,this.countDown(!0)):this.onUpdateTimer()},e.prototype.onUpdateTimer=function(){var t=this;return null==this.stage?void DLOG("update info forbid"):(DLOG("update info in time"),void EOSSystem.One().getGameInfo().then(function(e){t.updateGameId(e.rows[0].game_id);var n=new Date,i=new Date(1e3*e.rows[0].endtime),a=i.valueOf()-n.valueOf(),o=Math.floor(a/1e3)+Cf.One().config.timeCountDownAdd-Cf.One().config.timeCOuntDownOffset;o>170||(Cf.One().gameData.countdown=o,t.countDown(!0))})["catch"](function(t){DLOG("err",t)}))},e.prototype.enableBtnOperate=function(t,e){this.bt_bit1&&(t||this.focusTo(null,null),this.bt_start.touchEnabled=e,this.isBtnEnable=t,this.bt_bit1.touchEnabled=t,this.bt_bit5.touchEnabled=t,this.bt_bit20.touchEnabled=t,this.btBitReset.touchEnabled=t,t?(this.bt_bit1.alpha=Cf.One().config.btDefaultAlpha,this.bt_bit5.alpha=Cf.One().config.btDefaultAlpha,this.bt_bit20.alpha=Cf.One().config.btDefaultAlpha,this.btBitReset.alpha=Cf.One().config.btDefaultAlpha):(this.bt_bit1.alpha=Cf.One().config.btDisableAlpha,this.bt_bit5.alpha=Cf.One().config.btDisableAlpha,this.bt_bit20.alpha=Cf.One().config.btDisableAlpha,this.btBitReset.alpha=Cf.One().config.btDisableAlpha),this.bt_start.touchEnabled?this.bt_start.alpha=Cf.One().config.btDefaultAlpha:this.bt_start.alpha=Cf.One().config.btDisableAlpha)},e.prototype.willGotoRaceScene=function(){this.status&BetStatus.goingToRaceScene||(Cf.One().checkRaceData()?(this.status|=BetStatus.goingToRaceScene,SceneCore.GotoScene(SceneType.Game_Running)):(this.boardLoading||(this.boardLoading=new BoardWaiting,this.boardLoading.visible=!1,this.layerBoard.addChild(this.boardLoading)),this.boardLoading.visible||this.boardLoading.fadeIn()))},e.prototype.countDown=function(t){var e=this;if(void 0===t&&(t=!1),egret.Tween.removeTweens(this),!t){if(Cf.One().gameData.countdown<=0)return this.txtTimeCountDown.text="00:00",void egret.Tween.get(this).wait(1e3).call(function(){e.willGotoRaceScene()});Cf.One().gameData.countdown<3?this.status&BetStatus.forceGetRaceData||(Cf.One().forceRequireRaceData(),this.status|=BetStatus.forceGetRaceData):Cf.One().gameData.countdown<10&&(this.status&BetStatus.timeUp||(this.status|=BetStatus.timeUp,this.focusTo(null,null),this.reset(),this.enableBtnOperate(!1,!1)))}var n=Math.floor(Cf.One().gameData.countdown);this.txtTimeCountDown.text=Cf.One().fixNum(Math.floor(n/60))+":"+Cf.One().fixNum(n%60),egret.Tween.get(this).wait(1e3).call(function(){Cf.One().gameData.countdown=Math.max(Cf.One().gameData.countdown-1,0),e.countDown()})},e.prototype.onTap=function(t){if(Notify.One().post(NotifyName.btn_click),!EOSSystem.One().isHasScatterAccount)return void Cf.One().showTip(Lang.Val(LangKey.tip_noLogin));if(t.currentTarget==this.bt_start)AnalyticsSystem.One().btnPress(ButtonType.go),DEBUG1(DM1.goBtnForStart)?(Cf.One().saveBetsToServer({isFake:!0}).then(function(t){})["catch"](function(t){}),Notify.One().post(NotifyName.eos_result_update,{result:"12"}),Cf.One().gameData.countdown=2):this.saveCoins();else if(t.currentTarget==this.bt_bit1)AnalyticsSystem.One().btnPress(ButtonType.bet1Selected),this.focusTo(t.currentTarget,this.focus1,1);else if(t.currentTarget==this.bt_bit5)AnalyticsSystem.One().btnPress(ButtonType.bet5Selected),this.focusTo(t.currentTarget,this.focus5,5);else if(t.currentTarget==this.bt_bit20)AnalyticsSystem.One().btnPress(ButtonType.bet20Selected),this.focusTo(t.currentTarget,this.focus20,20);else if(t.currentTarget==this.btBitReset)AnalyticsSystem.One().btnPress(ButtonType.reset),this.reset();else if(this.status&BetStatus.hasBeted&&!DEBUG2(DM2.forceBet))Cf.One().showTip(Lang.Val(LangKey.tip_hasBeted));else if(this.status&BetStatus.timeUp&&!DEBUG2(DM2.forceBet))Cf.One().showTip(Lang.Val(LangKey.tip_betTimeOut));else if(this.bt_focused||DEBUG2(DM2.forceBet)){if("ids"in t.currentTarget){if(this.count_focus>Cf.One().info.leftEos)return void Cf.One().showTip(Lang.Val(LangKey.tip_noEnoughMoney));var e=t.currentTarget.ids,n=Cf.One().idsToStr(e);1==n.length?AnalyticsSystem.One().btnPress(ButtonType.betSel1st):2==n.length&&AnalyticsSystem.One().btnPress(ButtonType.betSel1st2nd),AnalyticsSystem.One().betSel(n),SoundManager.One().play(SoundName.tag_sfx_betDown,!1),this.motionCoin(Cf.One().idsToStr(e),this.bt_focused,t.currentTarget),this.enableBtnOperate(!0,!0)}}else Cf.One().showTip(Lang.Val(LangKey.tip_chooseBetFirst))},e.prototype.saveCoins=function(){var t=this;this.status|=BetStatus.hasBeted,Cf.One().saveBetsToServer().then(function(e){t.updateCoinInfo(),Cf.One().showTip(Lang.Val(LangKey.tip_transactionConfirmed));var n=e.processed.action_traces[0].act.data.memo;TalkingSystem.One().sendBet(n)})["catch"](function(e){DLOG("error",e),t.enableBtnOperate(!0,!1),Cf.One().showTip(Lang.Val(LangKey.tip_errorF1),e.message)}),this.enableBtnOperate(!1,!1),this.focusTo(null,null)},e.prototype.updateCoinInfo=function(){var t=this;EOSSystem.One().getMoney().then(function(e){e&&e.rows&&e.rows[0]&&(Cf.One().info.totalEos=EOSSystem.MoneyFromStr(e.rows[0].balance),t.txtBitInfo.text="BET AMT: "+EOSSystem.MoneyToStr(Cf.One().info.costEos,null,0)+" | BAL: "+EOSSystem.MoneyToStr(Cf.One().info.totalEos))})["catch"](function(t){DERR(t)})},e.prototype.checkCanBet=function(t,e){return!Cf.One().checkOverTheWinPool({idsStr:t,bet:e})},e.prototype.jumpCoin=function(t,e){var n=this.betTargets[t];if(!this.dicBitNext[t]&&n){var i=4,a=n.localToGlobal((n.width-74)/2+Math.random()*i-i/2,Math.random()*i-i/2);a.x+=-Cf.One().config.offsetStageContent.x,a.y+=-Cf.One().config.offsetStageContent.y,this.dicBitNext[t]=OBJManager.createNode(Unit_Bit,ObjManagerType.Unit_Bit),this.layer_coins.addChild(this.dicBitNext[t]),this.dicBitNext[t].x=a.x,this.dicBitNext[t].y=a.y,this.dicBitNext[t].scaleX=this.dicBitNext[t].scaleY=.85}Cf.One().addBets(t,e),this.updateCoinInfo(),this.dicBitNext[t]&&(this.dicBitNext[t].visible=!0,this.dicBitNext[t].addCount(e))},e.prototype.motionCoin=function(t,e,n){var i=this;if(DLOG("bet max log",t,e,n),this.checkCanBet(t,this.count_focus)){this.bt_start.alpha=Cf.One().config.btDefaultAlpha;var a=OBJManager.createNode(Unit_Bit,ObjManagerType.Unit_Bit);a.addCount(this.count_focus),this.layer_coins.addChild(a);var o=e.localToGlobal(4*Math.random()-2,4*Math.random()-2),s=n.localToGlobal(4*Math.random()-2,4*Math.random()-2);if(o.x+=-Cf.One().config.offsetStageContent.x,o.y+=-Cf.One().config.offsetStageContent.y,s.x+=-Cf.One().config.offsetStageContent.x,s.y+=-Cf.One().config.offsetStageContent.y,a.x=o.x,a.y=o.y,!this.dicBitNext[t]){var r=4,h=n.localToGlobal((n.width-a.width)/2+Math.random()*r-r/2,Math.random()*r-r/2);h.x+=-Cf.One().config.offsetStageContent.x,h.y+=-Cf.One().config.offsetStageContent.y,this.dicBitNext[t]=OBJManager.createNode(Unit_Bit,ObjManagerType.Unit_Bit),this.layer_coins.addChild(this.dicBitNext[t]),this.dicBitNext[t].x=h.x,this.dicBitNext[t].y=h.y,this.dicBitNext[t].scaleX=this.dicBitNext[t].scaleY=.85,this.dicBitNext[t].visible=!1}Cf.One().addBets(t,this.count_focus),this.updateCoinInfo(),egret.Tween.removeTweens(a),egret.Tween.get(a).to({x:s.x,scaleX:.85,scaleY:.85},500),egret.Tween.get(a).to({y:s.y},500,egret.Ease.backOut).call(function(){i.dicBitNext[t]&&(i.dicBitNext[t].visible=!0,i.dicBitNext[t].addCount(i.count_focus)),OBJManager.DestroyNode(a)},this)}},e.prototype.focusTo=function(t,e,n){void 0===n&&(n=0),t?(this.bt_focused=t,this.count_focus=n,this.mc_focused&&(egret.Tween.removeTweens(this.mc_focused),this.mc_focused.alpha=0),this.mc_focused=e,this.mc_focused&&(this.mc_focused.alpha=1,egret.Tween.get(this.mc_focused,{loop:!0}).to({alpha:.8},1e3).wait(150).to({alpha:1},1e3).wait(150))):(this.bt_focused&&(this.bt_focused=null),this.mc_focused&&(egret.Tween.removeTweens(this.mc_focused),this.mc_focused.alpha=0,this.mc_focused=null))},e.prototype.drawBg=function(){var t=OBJManager.CreateImage("yard_bg1_png");t.width=3*t.width,t.height=3*t.height,t.anchorOffsetY=t.height,t.anchorOffsetX=t.width,t.y=Cf.One().stageSize.height,t.x=Cf.One().stageSize.width,this.addChildAt(t,0)},e.prototype.onNotify=function(e){e.name==NotifyName.eos_result_update?(this.boardLoading&&(this.boardLoading.visible=!1),this.willGotoRaceScene()):t.prototype.onNotify.call(this,e)},e}(Scene_Bets_UI);__reflect(Scene_Bets.prototype,"Scene_Bets");var Scene_Debug=function(t){function e(){var e=t.call(this)||this,n=new BoardTalk;return e.addChild(n),e}return __extends(e,t),e}(SceneCore);__reflect(Scene_Debug.prototype,"Scene_Debug");var Scene_RunningGame=function(t){function e(){var e=t.call(this)||this;e.poolNumMark=[],DEBUG1(DM1.fixAutoSize)&&(e.width=Cf.One().stageSize.width,e.height=Cf.One().stageSize.height),e.boardRunning=new Board_Running,e.layerMajor.addChild(e.boardRunning);for(var n=0;8>n;n++)e.poolNumMark.push(null);return e}return __extends(e,t),e.prototype.onShow=function(){t.prototype.onShow.call(this),Cf.One().updateAuctionAdInfo(),Notify.One().add(NotifyName.game_runing_update,this.onNotify,this),Notify.One().add(NotifyName.game_finish_seq,this.onNotify,this),Notify.One().add(NotifyName.game_finish_end,this.onNotify,this),Notify.One().add(NotifyName.lang_change,this.onNotify,this),Notify.One().add(NotifyName.game_startRun,this.onNotify,this),this.boardTalk=BoardTalk.One(),this.boardTalk.updateParent(this.grpTalk),this.boardTalk.changeRightView(TalkRightViewType.Seq)},e.prototype.onHide=function(){t.prototype.onHide.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.grpMajor.addChild(this.layerMajor),this.drawBg()},e.prototype.onNotify=function(e){if(e.name==NotifyName.game_runing_update)for(var n=this.boardRunning.poolAnimate,i=this.boardRunning.rangeOfRunner,a=0;a<n.length;a++){var o=n[a];o.x<i.min?(this.poolNumMark[a]||(this.poolNumMark[a]=new NumBubble,this.layerMajor.addChild(this.poolNumMark[a])),this.poolNumMark[a].x=50,this.poolNumMark[a].y=o.localToGlobal(0,0).y,this.poolNumMark[a].show(o.num,Direction.left)):this.poolNumMark[a]&&this.poolNumMark[a].hide()}else if(e.name==NotifyName.game_finish_seq){var s=e.userdata.target;DLOG("final id "+s.id+", num. "+s.numFinish)}else e.name==NotifyName.game_finish_end?egret.Tween.get(this).wait(3e3).call(function(){Notify.One().post(NotifyName.board_gameFinal)}):e.name==NotifyName.game_startRun?DEBUG1(DM1.enableBgm)&&SoundManager.One().play(SoundName.tag_bgm_game,!1):e.name==NotifyName.lang_change||t.prototype.onNotify.call(this,e)},e.prototype.drawBg=function(){var t=OBJManager.CreateImage("yard_bg1_png");t.width=3*t.width,t.height=3*t.height,t.anchorOffsetY=t.height,t.anchorOffsetX=t.width,t.y=Cf.One().stageSize.height,t.x=Cf.One().stageSize.width,this.addChildAt(t,0)},e}(SceneCore);__reflect(Scene_RunningGame.prototype,"Scene_RunningGame");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function a(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(i,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var r=t.split("/");r.pop();var h=r.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(i,generateJSON.paths[t])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){e.call(i,generateJSON.paths[t])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Util;!function(t){function e(t,e){var n=t.getBounds(),i=e.getBounds();return n.x=t.x,n.y=t.y,i.x=e.x,i.y=e.y,n.intersects(i)}function n(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e}function i(t){console.log(t)}t.hitTest=e,t.createBitmapByName=n,t.log=i}(Util||(Util={}));var AnimalIdel=function(t){function e(){var n=t.call(this)||this;n.isAnimatePlayOnce=!1,n.loopTimes=0,n.isRanFrame=!1,n.poolStatus=[],n.poolLoops=[],n.poolId=-1,n.skinId=0,n.isBeginPlayAnimate=!0,n.id=-1,n.armature=OBJManager.createBone(Cf.One().config.animateStand,"Armature"),dragonBones.WorldClock.clock.add(n.armature),n.armatureDisplay=n.armature.getDisplay(),n.addChild(n.armatureDisplay),n.armatureDisplay.x=0,n.armatureDisplay.y=0,n.armatureDisplay.scaleX=n.armatureDisplay.scaleY=.2,n.armature.eventDispatcher.addDBEventListener(dragonBones.EventObject.COMPLETE,n.onAnimateDone,n),e.armatureRandomId++;for(var i=Math.floor(2*Math.random())+2,a=0;i>a;a++){var o=e.armatureRandomId+Math.floor(Math.random()*(AnimalStatus.idleRandom-AnimalStatus.idle1));o=o%3+AnimalStatus.idle1,a==i-1&&(o=[AnimalStatus.hey1,AnimalStatus.hey2,AnimalStatus.hey3,AnimalStatus.hey4,AnimalStatus.hey5][e.armatureRandomId%3]);var s=Math.floor(3*Math.random())+1;switch(o){case AnimalStatus.hey1:case AnimalStatus.hey2:case AnimalStatus.hey3:s=1}n.poolStatus.push(o%6+AnimalStatus.idle1),n.poolLoops.push(s)}return n.setStatusNext(),n}return __extends(e,t),e.prototype.updateId=function(){this.skinId=this.id;for(var t=["hair","body","head","ear1L","ear2L","earR","mouth","armL","armR","arm2R1","arm2R2","arm2R3"],e=0;e<t.length;e++){var n=t[e];this.armature.getSlot(n).displayIndex=this.skinId}},e.prototype.setStatusNext=function(){this.poolId++,this.poolId>=this.poolStatus.length&&(this.poolId=0),this.setStatus(this.poolStatus[this.poolId],this.isBeginPlayAnimate,this.poolLoops[this.poolId]),this.isBeginPlayAnimate=!1},e.prototype.setStatus=function(t,e,n){switch(void 0===e&&(e=!0),void 0===n&&(n=0),this.status=t,this.isRanFrame=e,this.loopTimes=n,this.status){case AnimalStatus.idleRandom:this.animateStr=Cf.One().ranArr(["idle1","idle2","idle3","hey1","hey2","hey3","hey4","hey5"]);break;case AnimalStatus.idle1:this.animateStr="idle1";break;case AnimalStatus.idle2:this.animateStr="idle2";break;case AnimalStatus.idle3:this.animateStr="idle3";break;case AnimalStatus.hey1:this.animateStr="hey1";break;case AnimalStatus.hey2:this.animateStr="hey2";break;case AnimalStatus.hey3:this.animateStr="hey3";break;case AnimalStatus.hey4:this.animateStr="hey4";break;case AnimalStatus.hey5:this.animateStr="hey5";break;case AnimalStatus.game_win:this.animateStr="game_win";break;default:this.animateStr="idle1"}this.updateAnimate()},e.prototype.updateAnimate=function(){if(this.armature&&this.armature.animation.lastAnimationName!=this.animateStr)if(this.isRanFrame){var t=Math.random();this.armature.animation.gotoAndPlayByTime(this.animateStr,t,this.loopTimes)}else this.armature.animation.fadeIn(this.animateStr,.1,this.loopTimes);else this.armature.animation.fadeIn(this.animateStr,.1,this.loopTimes)},e.prototype.onAnimateDone=function(){this.isAnimatePlayOnce||this.setStatusNext()},e.armatureRandomId=Math.floor(Math.random()*(AnimalStatus.idleRandom-AnimalStatus.idle1)),e}(SpriteWithAlphaPlus);__reflect(AnimalIdel.prototype,"AnimalIdel");var AnimalStander=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.num=0,e.numFinish=0,e.loopTimes=0,e.isRanFrame=!1,e.isGameOver=!1,e.isSweat=!1,e.orginalPot={x:0,y:0},e.stepCount=0,e.oldIndex=-1,e.oldSpeed=0,e.armature=OBJManager.createBone(Cf.One().config.animateRun,"hamster"),dragonBones.WorldClock.clock.add(e.armature),e.armatureDisplay=e.armature.getDisplay(),e.addChild(e.armatureDisplay),e.armatureDisplay.x=0,e.armatureDisplay.y=0,e.armatureDisplay.scaleX=e.armatureDisplay.scaleY=.2,e.armature.eventDispatcher.addDBEventListener(dragonBones.EventObject.COMPLETE,e.onAnimateDone,e),e}return __extends(e,t),e.prototype.reset=function(t){void 0===t&&(t=RunnerDebugType.NONE),this.status=AnimalStatus.NONE,this.armatureDisplay&&(this.armatureDisplay.animation.timeScale=1),this.id>-1&&Cf.One().gameData.idGetSeq&&Cf.One().gameData.idGetSeq[this.id]>-1&&Cf.One().poolSpeeds&&Cf.One().gameData.idGetSeq[this.id]<Cf.One().poolSpeeds.length&&(this.poolSpeeds=Cf.One().poolSpeeds[Cf.One().gameData.idGetSeq[this.id]].speeds),this.speed=0,this.speedMax=5,this.oldIndex=-1,this.isFinished=!1,this.stepCount=0,this.isRanFrame=!1,this.isGameOver=!1,this.x=0,this.y=0},e.prototype.updateId=function(){this.skinId=this.id;for(var t=["tail","legR1","legR2","footR","legL","footL","body","head","hair","armR1","armR2","clawR"],e=0;e<t.length;e++){var n=t[e];this.armature.getSlot(n).displayIndex=this.skinId}},e.prototype.startMove=function(){this.setStatus(AnimalStatus.run2)},e.prototype.stopMove=function(){this.armatureDisplay&&(this.armatureDisplay.animation.timeScale=0)},e.prototype.onUpdate=function(){var t=Math.floor(this.stepCount/5);t>=this.poolSpeeds.length&&(this.stepCount=0,t=Math.floor(this.stepCount/5)),this.isFinished||this.oldIndex==t||(this.oldIndex=t,this.oldSpeed=this.poolSpeeds[t],this.oldSpeed*=Cf.One().config.speedBitForMotion),this.isFinished&&(this.oldSpeed=5,this.oldSpeed*=Cf.One().config.speedBitForMotion),this.speed+=(this.oldSpeed-this.speed)/15,this.x+=this.speed,DEBUG1(DM1.onlyOneActionAnimate)?this.x/Cf.One().config.distance>.66?this.setStatus(AnimalStatus.run3):this.speed<4.5&&this.setStatus(AnimalStatus.run2):this.speed<=4*Cf.One().config.speedBitForMotion&&this.status!=AnimalStatus.run1?this.setStatus(AnimalStatus.run1):this.speed>=5*Cf.One().config.speedBitForMotion&&this.status!=AnimalStatus.run2&&this.setStatus(AnimalStatus.run2),this.armatureDisplay.animation.timeScale=this.speed/this.speedMax*Cf.One().config.speedBitForAnimate/Cf.One().config.speedBitForMotion,this.stepCount++},e.prototype.setStatus=function(t,e){switch(void 0===e&&(e=!0),this.isRanFrame=e,this.status=t,this.loopTimes=0,this.status){case AnimalStatus.ready:this.animateStr="ready";break;case AnimalStatus.run1:this.animateStr="running1";break;case AnimalStatus.run2:this.animateStr="running2";break;case AnimalStatus.run1:this.animateStr="running1";break;case AnimalStatus.run2:this.animateStr="running2",this.isSweat=!1;break;case AnimalStatus.run3:this.animateStr="running3",this.isSweat=!0;break;case AnimalStatus.runRandom:this.animateStr="running"+Math.floor(2*Math.random()+1);break;default:this.animateStr="stand"}this.updateAnimate()},e.prototype.updateAnimate=function(){if(this.armature&&this.armature.animation.lastAnimationName!=this.animateStr)if(this.isRanFrame){var t=Math.floor(59*Math.random()),e=dragonBones.BaseObject.borrowObject(dragonBones.AnimationConfig);e.name=this.animateStr,e.resetToPose=!0,e.playTimes=this.loopTimes,e.fadeInTime=.05,e.animation=this.animateStr,e.position=t/60,this.armature.animation.playConfig(e)}else this.armature.animation.fadeIn(this.animateStr,.1,this.loopTimes)},e.prototype.onAnimateDone=function(){},e}(egret.DisplayObjectContainer);__reflect(AnimalStander.prototype,"AnimalStander");var FinalTalk=function(t){function e(){var e=t.call(this)||this;return e.rect=new eui.Rect,e.rect.strokeAlpha=0,e.rect.fillAlpha=0,e.rect.width=10,e.rect.height=10,e.addChild(e.rect),e.text=new egret.TextField,e.text.verticalAlign="middle",e.text.textAlign="center",e.text.size=22,e.text.textColor=0,e.text.wordWrap=!0,e.text.width=174,e.addChild(e.text),e}return __extends(e,t),e.prototype.setText=function(t){this.text.text=t,this.setListSize(1,this.text.height)},e.prototype.setListSize=function(t,e){t>0&&(this.rect.width=t),e>0&&(this.rect.height=e)},e.prototype.getListSize=function(){return{width:this.rect.width,height:this.rect.height}},e}(eui.Group);__reflect(FinalTalk.prototype,"FinalTalk");var LangList_Unit=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/LangList_Unit.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.txtLang.touchEnabled=!1,this.once(egret.Event.ENTER_FRAME,function(){var t=e.data;e.txtLang.text=t.langName},this),this.mcBg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=e.data.id;LS.Save(LSKey.lang,String(t)),Lang.SetLang(t),Notify.One().post(NotifyName.lang_change)},this)},e}(eui.ItemRenderer);__reflect(LangList_Unit.prototype,"LangList_Unit");var LangList=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this);for(var n=[],i=LangType.NONE+1;i<LangType.TOTAL;i++)n.push({id:i,langName:Lang.GetLang(i).langName});if(this.data=new eui.ArrayCollection(n),this.list){var a=this.scroller.viewport.scrollV;this.list.dataProvider=this.data,this.scroller.visible=!1,this.once(egret.Event.ENTER_FRAME,function(){e.scroller.viewport.scrollV=a,e.scroller.visible=!0},this)}else this.list=new eui.List,this.list.itemRenderer=LangList_Unit,this.list.dataProvider=this.data,this.scroller.viewport=this.list,this.scroller.touchEnabled=!0},e}(BoardCore);__reflect(LangList.prototype,"LangList");var Layer_HistoryList=function(t){function e(){var e=t.call(this)||this;e.poolData=[],e.poolUnit=[];for(var n=0;n<Cf.One().config.historyMaxCount;n++){var i=new Layer_HistoryUnit;e.addChild(i),i.y=25*n,e.poolUnit.push(i),i.visible=!1}return e}return __extends(e,t),e.prototype.clear=function(){this.poolData=[];for(var t=0;t<this.poolUnit.length;t++){var e=this.poolUnit[t];e.visible=!1}},e.prototype.reset=function(t){if(this.poolData=[],!t||!t.rows)return void DLOG("Data is empty");for(var e=t.rows[0].results,n=e.length-1;n>=0;n--)if(!(n>=Cf.One().config.historyMaxCount)){var i=e[n];this.poolData.push({seq:i.game_id,n12:i.result,n1:i.result[0]})}this.updateDisplay()},e.prototype.unshift=function(t,e,n){this.poolData.unshift({seq:t,n12:e,n1:n}),this.poolData.length>Cf.One().config.historyMaxCount&&this.poolData.splice(Cf.One().config.historyMaxCount,10),this.updateDisplay()},e.prototype.updateDisplay=function(){for(var t=0;t<this.poolUnit.length;t++){var e=this.poolUnit[t];if(t>=this.poolData.length)e.visible=!1;else{var n=this.poolData[t];e.visible=!0,e.reset(n.seq,n.n12,n.n1)}}},e}(eui.Group);__reflect(Layer_HistoryList.prototype,"Layer_HistoryList");var Layer_HistoryUnit=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/Layer_HistoryUnit.exml",e}return __extends(e,t),e.prototype.reset=function(t,e,n){this.txtSeq.text="   No."+t;var i=e.indexOf(n),a=e.substr((i+1)%e.length,1);this.txtNum.text=n+"   "+a},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.txtNum&&(this.txtNum.text=""),this.txtSeq&&(this.txtSeq.text="")},e}(eui.Component);__reflect(Layer_HistoryUnit.prototype,"Layer_HistoryUnit",["eui.UIComponent","egret.DisplayObject"]);var Layer_IconSeq=function(t){function e(){var e=t.call(this)||this;return e.poolIcon=[],e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;8>e;e++)this.poolIcon.push(this["Icon"+(e+1)]);this.updateDisplay(0)},e.prototype.resetDisplay=function(t){if(this.combin=0,t.length>0)for(var e=0;e<t.length;e++)this.combin|=1<<t[e];if(this.poolIcon.length>0)for(var e=0;e<this.poolIcon.length;e++)1<<e&this.combin?this.poolIcon[e].alpha=Cf.One().config.alphaDef:this.poolIcon[e].alpha=Cf.One().config.alphaDisable},e.prototype.updateDisplay=function(t){for(var e=0;e<this.poolIcon.length;e++)e==t?this.poolIcon[e].alpha=Cf.One().config.alphaFocus:1<<e&this.combin?this.poolIcon[e].alpha=Cf.One().config.alphaDef:this.poolIcon[e].alpha=Cf.One().config.alphaDisable},e}(eui.Component);__reflect(Layer_IconSeq.prototype,"Layer_IconSeq",["eui.UIComponent","egret.DisplayObject"]);var NumBubble=function(t){function e(){var e=t.call(this)||this;return e.direct=Direction.NONE,e.scaleX=e.scaleY=.5,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.txtNum.text="",this.grp.anchorOffsetX=this.grp.width/2,this.grp.anchorOffsetY=this.grp.height/2},e.prototype.show=function(t,e){if(this.direct!=e){this.direct=e,this.txtNum.text=String(t),this.visible=!0,this.grp.y=-this.grp.height,this.direct==Direction.left?(this.imgR.visible=!1,this.imgL.visible=!0,this.grp.x=0):this.direct==Direction.right&&(this.imgR.visible=!0,this.imgL.visible=!1,this.grp.x=-this.grp.width),egret.Tween.removeTweens(this.grp),this.grp.scaleX=.5,this.grp.scaleY=1.5;
var n=this.grp.y;this.grp.y+=30,egret.Tween.get(this.grp).to({scaleX:1,scaleY:1,y:n},1e3,egret.Ease.bounceOut)}},e.prototype.hide=function(){this.visible=!1,this.direct=Direction.NONE},e}(eui.Component);__reflect(NumBubble.prototype,"NumBubble",["eui.UIComponent","egret.DisplayObject"]);var TalkList=function(t){function e(){var e=t.call(this)||this;return e.poolMsg=[],e.posY=0,e.maxTalk=9999,e.maxTalk=Cf.One().config.talkingListMaxHistory,e.touchEnabled=!1,e.rect=new eui.Rect,e.rect.strokeAlpha=0,e.rect.fillAlpha=0,e.rect.width=500,e.rect.height=1e3,e.addChild(e.rect),e}return __extends(e,t),e.prototype.setListSize=function(t,e){t>0&&(this.rect.width=t),e>0&&(this.rect.height=e)},e.prototype.getListSize=function(){return{width:this.rect.width,height:this.rect.height}},e.prototype.addMsg=function(t){var e=OBJManager.createTextfield();e.text=t,e.textColor=16777215,e.size=18,e.width=this.rect.width-5,e.touchEnabled=!1,e.cacheAsBitmap=!0,this.addChild(e),e.y=this.posY,this.posY+=e.height+Cf.One().config.talkingListUnitDistance,this.poolMsg.push(e),this.updateCheck()},e.prototype.updateCheck=function(){if(this.poolMsg.length>this.maxTalk+10){for(var t=0;10>t;t++){var e=this.poolMsg[t];OBJManager.destroyTextField(e)}this.poolMsg.splice(0,10),this.posY=0;for(var t=0;t<this.poolMsg.length;t++){var e=this.poolMsg[t];e.y=this.posY,this.posY+=e.height+Cf.One().config.talkingListUnitDistance}}this.setListSize(0,this.posY)},e}(eui.Group);__reflect(TalkList.prototype,"TalkList");var Unit_Bit=function(t){function e(){var e=t.call(this)||this;return e.count=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.txtLabel.touchEnabled=!1,this.mcBg.touchEnabled=!1},e.prototype.setCount=function(t){this.count=t,this.updateChange()},e.prototype.getCount=function(){return this.count},e.prototype.addCount=function(t){this.count+=t,this.updateChange()},e.prototype.clearCount=function(){this.count=0,this.updateChange()},e.prototype.updateChange=function(){this.txtLabel&&(this.count<100?this.txtLabel.size=25:this.txtLabel.size=20,this.txtLabel.text=String(this.count),this.count<5?this.mcBg.texture=RES.getRes("game_res_json.simbol_bit1"):this.count<20?this.mcBg.texture=RES.getRes("game_res_json.simbol_bit5"):this.mcBg.texture=RES.getRes("game_res_json.simbol_bit10"))},e.prototype.onShow=function(){this.updateChange()},e.prototype.onDestroy=function(){this.clearCount()},e}(eui.Component);__reflect(Unit_Bit.prototype,"Unit_Bit",["eui.UIComponent","egret.DisplayObject","IObjManager"]);